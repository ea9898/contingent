<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog
        xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.6.xsd">

    <changeSet id="1.0.0.0" author="ddryuchin" labels ="1.0.0.0">
        <tagDatabase tag="1.0.0.0"/>
    </changeSet>

    <changeSet id="EMIASUPK-7594-1" author="sorlov" labels="1.0.0.0">
        <preConditions onFail="MARK_RAN">
            <not>
                <tableExists tableName="ADDRESS_FORMING_ELEMENT"/>
            </not>
        </preConditions>
        <comment>Создание таблицы ADDRESS_FORMING_ELEMENT</comment>
        <createTable tableName="ADDRESS_FORMING_ELEMENT"
                     remarks="Адресообразующий элемент">
            <column name="ID" type="NUMBER(20)">
                <constraints primaryKey="true" nullable="false" />
            </column>
            <column name="TYPE" type="VARCHAR2(50)" />
            <column name="NAME" type="VARCHAR2(350)" />
        </createTable>
        <rollback>
            <dropTable tableName="ADDRESS_FORMING_ELEMENT"/>
        </rollback>
    </changeSet>

    <changeSet id="EMIASUPK-7594-2" author="sorlov" labels="1.0.0.0">
        <preConditions onFail="MARK_RAN">
            <not>
                <tableExists tableName="AREA_COUNT_LIMIT"/>
            </not>
        </preConditions>
        <comment>Создание таблицы AREA_COUNT_LIMIT</comment>
        <createTable tableName="AREA_COUNT_LIMIT"
                     remarks="Лимиты по кличеству участков">
            <column name="CODE" type="NUMBER(20)">
                <constraints primaryKey="true" nullable="false" />
            </column>
            <column name="VALUE" type="VARCHAR2(50)" />
        </createTable>
        <rollback>
            <dropTable tableName="AREA_COUNT_LIMIT"/>
        </rollback>
    </changeSet>

    <changeSet id="EMIASUPK-7594-3" author="sorlov" labels="1.0.0.0">
        <preConditions onFail="MARK_RAN">
            <not>
                <tableExists tableName="CLASS_AREA_TYPES"/>
            </not>
        </preConditions>
        <comment>Создание таблицы CLASS_AREA_TYPES</comment>
        <createTable tableName="CLASS_AREA_TYPES">
            <column name="CODE" type="NUMBER(20)">
                <constraints primaryKey="true" nullable="false" />
            </column>
            <column name="VALUE" type="VARCHAR2(255)" />
        </createTable>
        <rollback>
            <dropTable tableName="CLASS_AREA_TYPES"/>
        </rollback>
    </changeSet>

    <changeSet id="EMIASUPK-7594-4" author="sorlov" labels="1.0.0.0">
        <preConditions onFail="MARK_RAN">
            <not>
                <tableExists tableName="KIND_AREA_TYPES"/>
            </not>
        </preConditions>
        <comment>Создание таблицы KIND_AREA_TYPES</comment>
        <createTable tableName="KIND_AREA_TYPES">
            <column name="CODE" type="NUMBER(20)">
                <constraints primaryKey="true" nullable="false" />
            </column>
            <column name="VALUE" type="VARCHAR2(255)" />
        </createTable>
        <rollback>
            <dropTable tableName="KIND_AREA_TYPES"/>
        </rollback>
    </changeSet>

    <changeSet id="EMIASUPK-7594-5" author="sorlov" labels="1.0.0.0">
        <preConditions onFail="MARK_RAN">
            <not>
                <tableExists tableName="SPECIALIZATION"/>
            </not>
        </preConditions>
        <comment>Создание таблицы SPECIALIZATION</comment>
        <createTable tableName="SPECIALIZATION">
            <column name="ID" type="NUMBER(20)">
                <constraints primaryKey="true" nullable="false" />
            </column>
            <column name="TITLE" type="VARCHAR2(100)">
                <constraints nullable="false" />
            </column>
            <column name="ARCHIVED" type="NUMBER(1)" defaultValue="0">
                <constraints nullable="false" />
            </column>
        </createTable>
        <rollback>
            <dropTable tableName="SPECIALIZATION"/>
        </rollback>
    </changeSet>

    <changeSet id="EMIASUPK-7594-6" author="sorlov" labels="1.0.0.0">
        <preConditions onFail="MARK_RAN">
            <not>
                <tableExists tableName="AREA_TYPES"/>
            </not>
        </preConditions>
        <comment>Создание таблицы AREA_TYPES</comment>
        <createTable tableName="AREA_TYPES"
                     remarks="Тип участка">
            <column name="CODE" type="NUMBER(20)" remarks="Код типа участка">
                <constraints primaryKey="true" nullable="false" />
            </column>
            <column name="NAME" type="VARCHAR2(100)" />
            <column name="KIND_AREA_TYPE_CODE" type="NUMBER(20)" />
            <column name="CLASS_AREA_TYPE_CODE" type="NUMBER(20)" remarks="Класс типа участка. Код" />
            <column name="GENDER" type="VARCHAR2(1)" remarks="Пол, 0 - любой, 1 - м, 2- ж" />
            <column name="AGE_MIN" type="NUMBER(8)" remarks="Возраст мин" />
            <column name="AGE_MAX" type="NUMBER(8)" remarks="Возраст макс" />
            <column name="AGE_M_MIN" type="NUMBER(8)" remarks="Возраст М мин" />
            <column name="AGE_M_MAX" type="NUMBER(8)" remarks="Возраст М макс" />
            <column name="AGE_W_MIN" type="NUMBER(8)" remarks="Возраст Ж мин" />
            <column name="AGE_W_MAX" type="NUMBER(8)" remarks="Возраст Ж макс" />
            <column name="ACTUAL" type="NUMBER(1)" remarks="Статус" />
            <column name="SPECIALIZATION_ID" type="NUMBER(20)" />
        </createTable>
        <rollback>
            <dropTable tableName="AREA_TYPES"/>
        </rollback>
    </changeSet>

    <changeSet id="EMIASUPK-7594-6-1" author="sorlov" labels="1.0.0.0">
        <preConditions onFail="MARK_RAN">
            <not>
                <indexExists indexName="IXFK_AREA_TYPES_CLASS_ARE01"/>
            </not>
        </preConditions>
        <comment>Создание индекса колонки CLASS_AREA_TYPE_CODE таблицы AREA_TYPES</comment>
        <createIndex indexName="IXFK_AREA_TYPES_CLASS_ARE01"
                     tableName="AREA_TYPES"
                     unique="false">
            <column name="CLASS_AREA_TYPE_CODE" type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="EMIASUPK-7594-6-2" author="sorlov" labels="1.0.0.0">
        <preConditions onFail="MARK_RAN">
            <not>
                <indexExists indexName="IXFK_AREA_TYPES_KIND_AREA01"/>
            </not>
        </preConditions>
        <comment>Создание индекса колонки KIND_AREA_TYPE_CODE таблицы AREA_TYPES</comment>
        <createIndex indexName="IXFK_AREA_TYPES_KIND_AREA01"
                     tableName="AREA_TYPES"
                     unique="false">
            <column name="KIND_AREA_TYPE_CODE" type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="EMIASUPK-7594-6-3" author="sorlov" labels="1.0.0.0">
        <preConditions onFail="MARK_RAN">
            <not>
                <indexExists indexName="IXFK_AREA_TYPES_SPECIALIZATION"/>
            </not>
        </preConditions>
        <comment>Создание индекса колонки SPECIALIZATION_ID таблицы AREA_TYPES</comment>
        <createIndex indexName="IXFK_AREA_TYPES_SPECIALIZATION"
                     tableName="AREA_TYPES"
                     unique="false">
            <column name="SPECIALIZATION_ID" type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="EMIASUPK-7594-6-4" author="sorlov" labels="1.0.0.0">
        <preConditions onFail="MARK_RAN">
            <columnExists tableName="AREA_TYPES" columnName="CLASS_AREA_TYPE_CODE" />
            <columnExists tableName="CLASS_AREA_TYPES" columnName="CODE" />
        </preConditions>
        <comment>Создание внешнего ключа FK_AREA_TYPES_CLASS_AREA_TYPES</comment>
        <addForeignKeyConstraint baseColumnNames="CLASS_AREA_TYPE_CODE"
                                 baseTableName="AREA_TYPES"
                                 constraintName="FK_AREA_TYPES_CLASS_AREA_TYPES"
                                 referencedColumnNames="CODE"
                                 referencedTableName="CLASS_AREA_TYPES"/>
    </changeSet>

    <changeSet id="EMIASUPK-7594-6-5" author="sorlov" labels="1.0.0.0">
        <preConditions onFail="MARK_RAN">
            <columnExists tableName="AREA_TYPES" columnName="KIND_AREA_TYPE_CODE" />
            <columnExists tableName="KIND_AREA_TYPES" columnName="CODE" />
        </preConditions>
        <comment>Создание внешнего ключа FK_AREA_TYPES_KIND_AREA_TYPES</comment>
        <addForeignKeyConstraint baseColumnNames="KIND_AREA_TYPE_CODE"
                                 baseTableName="AREA_TYPES"
                                 constraintName="FK_AREA_TYPES_KIND_AREA_TYPES"
                                 referencedColumnNames="CODE"
                                 referencedTableName="KIND_AREA_TYPES"/>
    </changeSet>

    <changeSet id="EMIASUPK-7594-6-6" author="sorlov" labels="1.0.0.0">
        <preConditions onFail="MARK_RAN">
            <columnExists tableName="AREA_TYPES" columnName="SPECIALIZATION_ID" />
            <columnExists tableName="SPECIALIZATION" columnName="ID" />
        </preConditions>
        <comment>Создание внешнего ключа FK_AREA_TYPES_SPECIALIZATION</comment>
        <addForeignKeyConstraint baseColumnNames="SPECIALIZATION_ID"
                                 baseTableName="AREA_TYPES"
                                 constraintName="FK_AREA_TYPES_SPECIALIZATION"
                                 referencedColumnNames="ID"
                                 referencedTableName="SPECIALIZATION"/>
    </changeSet>

    <changeSet id="EMIASUPK-7594-7" author="sorlov" labels="1.0.0.0">
        <preConditions onFail="MARK_RAN">
            <not>
                <tableExists tableName="AREA_TYPE_MEDICAL_POSITIONS"/>
            </not>
        </preConditions>
        <comment>Создание таблицы AREA_TYPE_MEDICAL_POSITIONS</comment>
        <createTable tableName="AREA_TYPE_MEDICAL_POSITIONS"
                     remarks="Должности МР на типе участка">
            <column name="ID" type="NUMBER(20)">
                <constraints primaryKey="true" nullable="false" />
            </column>
            <column name="MEDICAL_POSITION_ID" type="NUMBER(20)" />
            <column name="AREA_TYPE_CODE" type="NUMBER(20)" remarks="Тип участка. Код" />
        </createTable>
        <rollback>
            <dropTable tableName="AREA_TYPE_MEDICAL_POSITIONS"/>
        </rollback>
    </changeSet>

    <changeSet id="EMIASUPK-7594-7-1" author="sorlov" labels="1.0.0.0">
        <preConditions onFail="MARK_RAN">
            <not>
                <indexExists indexName="IXFK_AREA_TYPE_MEDI_AREA_01"/>
            </not>
        </preConditions>
        <comment>Создание индекса колонки AREA_TYPE_CODE таблицы AREA_TYPE_MEDICAL_POSITIONS</comment>
        <createIndex indexName="IXFK_AREA_TYPE_MEDI_AREA_01"
                     tableName="AREA_TYPE_MEDICAL_POSITIONS"
                     unique="false">
            <column name="AREA_TYPE_CODE" type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="EMIASUPK-7594-7-2" author="sorlov" labels="1.0.0.0">
        <preConditions onFail="MARK_RAN">
            <columnExists tableName="AREA_TYPE_MEDICAL_POSITIONS" columnName="AREA_TYPE_CODE" />
            <columnExists tableName="AREA_TYPES" columnName="CODE" />
        </preConditions>
        <comment>Создание внешнего ключа FK_AREA_TYPE_MEDI_AREA_TYPE</comment>
        <addForeignKeyConstraint baseColumnNames="AREA_TYPE_CODE"
                                 baseTableName="AREA_TYPE_MEDICAL_POSITIONS"
                                 constraintName="FK_AREA_TYPE_MEDI_AREA_TYPE"
                                 referencedColumnNames="CODE"
                                 referencedTableName="AREA_TYPES"/>
    </changeSet>

    <changeSet id="EMIASUPK-7594-8" author="sorlov" labels="1.0.0.0">
        <preConditions onFail="MARK_RAN">
            <not>
                <tableExists tableName="AREA_TYPE_RELATIONS"/>
            </not>
        </preConditions>
        <comment>Создание таблицы AREA_TYPE_RELATIONS</comment>
        <createTable tableName="AREA_TYPE_RELATIONS"
                     remarks="Связь зависимых и первичных">
            <column name="DEPENDENT_AREA_TYPE_ID" type="NUMBER(20)" remarks="Код зависимого типа участка" />
            <column name="PRIMARY_AREA_TYPE_ID" type="NUMBER(20)" remarks="Код первичного типа участка" />
        </createTable>
        <rollback>
            <dropTable tableName="AREA_TYPE_RELATIONS"/>
        </rollback>
    </changeSet>

    <changeSet id="EMIASUPK-7594-8-1" author="sorlov" labels="1.0.0.0">
        <preConditions onFail="MARK_RAN">
            <not>
                <indexExists indexName="IXFK_AREA_TYPE_RELA_AREA_DEP"/>
            </not>
        </preConditions>
        <comment>Создание индекса колонки DEPENDENT_AREA_TYPE_ID таблицы AREA_TYPE_RELATIONS</comment>
        <createIndex indexName="IXFK_AREA_TYPE_RELA_AREA_DEP"
                     tableName="AREA_TYPE_RELATIONS"
                     unique="false">
            <column name="DEPENDENT_AREA_TYPE_ID" type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="EMIASUPK-7594-8-2" author="sorlov" labels="1.0.0.0">
        <preConditions onFail="MARK_RAN">
            <not>
                <indexExists indexName="IXFK_AREA_TYPE_RELA_AREA_PRIM"/>
            </not>
        </preConditions>
        <comment>Создание индекса колонки PRIMARY_AREA_TYPE_ID таблицы AREA_TYPE_RELATIONS</comment>
        <createIndex indexName="IXFK_AREA_TYPE_RELA_AREA_PRIM"
                     tableName="AREA_TYPE_RELATIONS"
                     unique="false">
            <column name="PRIMARY_AREA_TYPE_ID" type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="EMIASUPK-7594-8-3" author="sorlov" labels="1.0.0.0">
        <preConditions onFail="MARK_RAN">
            <columnExists tableName="AREA_TYPE_RELATIONS" columnName="DEPENDENT_AREA_TYPE_ID" />
            <columnExists tableName="AREA_TYPES" columnName="CODE" />
        </preConditions>
        <comment>Создание внешнего ключа FK_AREA_TYPE_REL_AREA_TYPE_DEP</comment>
        <addForeignKeyConstraint baseColumnNames="DEPENDENT_AREA_TYPE_ID"
                                 baseTableName="AREA_TYPE_RELATIONS"
                                 constraintName="FK_AREA_TYPE_REL_AREA_TYPE_DEP"
                                 referencedColumnNames="CODE"
                                 referencedTableName="AREA_TYPES"/>
    </changeSet>

    <changeSet id="EMIASUPK-7594-8-4" author="sorlov" labels="1.0.0.0">
        <preConditions onFail="MARK_RAN">
            <columnExists tableName="AREA_TYPE_RELATIONS" columnName="PRIMARY_AREA_TYPE_ID" />
            <columnExists tableName="AREA_TYPES" columnName="CODE" />
        </preConditions>
        <comment>Создание внешнего ключа FK_AREA_TYPE_REL_AREA_TYPE_PRI</comment>
        <addForeignKeyConstraint baseColumnNames="PRIMARY_AREA_TYPE_ID"
                                 baseTableName="AREA_TYPE_RELATIONS"
                                 constraintName="FK_AREA_TYPE_REL_AREA_TYPE_PRI"
                                 referencedColumnNames="CODE"
                                 referencedTableName="AREA_TYPES"/>
    </changeSet>

    <changeSet id="EMIASUPK-7594-9" author="sorlov" labels="1.0.0.0">
        <preConditions onFail="MARK_RAN">
            <not>
                <tableExists tableName="MU_PROFILE_TEMPLATES"/>
            </not>
        </preConditions>
        <comment>Создание таблицы MU_PROFILE_TEMPLATES</comment>
        <createTable tableName="MU_PROFILE_TEMPLATES"
                     remarks="Шаблон профиля МУ">
            <column name="ID" type="NUMBER(20)">
                <constraints primaryKey="true" nullable="false" />
            </column>
            <column name="MU_TYPE_ID" type="NUMBER(8)" />
            <column name="AREA_TYPE_CODE" type="NUMBER(20)" />
            <column name="AVAILABLE_TO_CREATE" type="NUMBER(1)" />
        </createTable>
        <rollback>
            <dropTable tableName="MU_PROFILE_TEMPLATES"/>
        </rollback>
    </changeSet>

    <changeSet id="EMIASUPK-7594-9-1" author="sorlov" labels="1.0.0.0">
        <preConditions onFail="MARK_RAN">
            <not>
                <indexExists indexName="IXFK_MU_TEMPLATE_PR_AREA_01"/>
            </not>
        </preConditions>
        <comment>Создание индекса колонки AREA_TYPE_CODE таблицы MU_PROFILE_TEMPLATES</comment>
        <createIndex indexName="IXFK_MU_TEMPLATE_PR_AREA_01"
                     tableName="MU_PROFILE_TEMPLATES"
                     unique="false">
            <column name="AREA_TYPE_CODE" type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="EMIASUPK-7594-9-2" author="sorlov" labels="1.0.0.0">
        <preConditions onFail="MARK_RAN">
            <columnExists tableName="MU_PROFILE_TEMPLATES" columnName="AREA_TYPE_CODE" />
            <columnExists tableName="AREA_TYPES" columnName="CODE" />
        </preConditions>
        <comment>Создание внешнего ключа FK_MU_TEMPLATE_PR_AREA_TYPE</comment>
        <addForeignKeyConstraint baseColumnNames="AREA_TYPE_CODE"
                                 baseTableName="MU_PROFILE_TEMPLATES"
                                 constraintName="FK_MU_TEMPLATE_PR_AREA_TYPE"
                                 referencedColumnNames="CODE"
                                 referencedTableName="AREA_TYPES"/>
    </changeSet>

    <changeSet id="EMIASUPK-7594-10" author="sorlov" labels="1.0.0.0">
        <preConditions onFail="MARK_RAN">
            <not>
                <tableExists tableName="POSITION_NOM"/>
            </not>
        </preConditions>
        <comment>Создание таблицы POSITION_NOM</comment>
        <createTable tableName="POSITION_NOM">
            <column name="ID" type="NUMBER(20)">
                <constraints primaryKey="true" nullable="false" />
            </column>
            <column name="TITLE" type="VARCHAR2(1000)">
                <constraints nullable="false" />
            </column>
            <column name="ARCHIVED" type="NUMBER(1)" defaultValue="0">
                <constraints nullable="false" />
            </column>
            <column name="RESOURCE_TYPE_CODE" type="NUMBER(20)" />
        </createTable>
        <rollback>
            <dropTable tableName="POSITION_NOM"/>
        </rollback>
    </changeSet>

    <changeSet id="EMIASUPK-7594-11" author="sorlov" labels="1.0.0.0">
        <preConditions onFail="MARK_RAN">
            <not>
                <tableExists tableName="PR_AREA_TYPE_ATTRS"/>
            </not>
        </preConditions>
        <comment>Создание таблицы PR_AREA_TYPE_ATTRS</comment>
        <createTable tableName="PR_AREA_TYPE_ATTRS"
                     remarks="Доп. атрибуты первичного участка">
            <column name="ID" type="NUMBER(20)">
                <constraints primaryKey="true" nullable="false" />
            </column>
            <column name="AREA_TYPE_CODE" type="NUMBER(20)" remarks="Код типа участка" />
            <column name="HEAD_FINANCE" type="NUMBER(1)" remarks="Участвует в подушевом финансировании" />
            <column name="HAS_SERVICE_TERRITORY" type="NUMBER(1)" remarks="Обслуживает территорию" />
            <column name="ATTACH_BY_REQUEST" type="NUMBER(1)" remarks="Прикрепление по заявлению" />
            <column name="ATTACH_BY_MEDICAL_REASON" type="NUMBER(1)" remarks="По мед. показаниям" />
            <column name="MPGU_AVAILABLE" type="NUMBER(1)" remarks="Возможно прикрепление через МПГУ" />
            <column name="AREA_COUNT_LIMIT_CODE" type="NUMBER(20)" />
        </createTable>
        <rollback>
            <dropTable tableName="PR_AREA_TYPE_ATTRS"/>
        </rollback>
    </changeSet>

    <changeSet id="EMIASUPK-7594-11-1" author="sorlov" labels="1.0.0.0">
        <preConditions onFail="MARK_RAN">
            <not>
                <indexExists indexName="IXFK_AREA_TYPE_ATTRS_AREA_TYPE"/>
            </not>
        </preConditions>
        <comment>Создание индекса колонки AREA_TYPE_CODE таблицы PR_AREA_TYPE_ATTRS</comment>
        <createIndex indexName="IXFK_AREA_TYPE_ATTRS_AREA_TYPE"
                     tableName="PR_AREA_TYPE_ATTRS"
                     unique="false">
            <column name="AREA_TYPE_CODE" type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="EMIASUPK-7594-11-2" author="sorlov" labels="1.0.0.0">
        <preConditions onFail="MARK_RAN">
            <not>
                <indexExists indexName="IXFK_PR_AREA_TYPE_AREA_COUNT"/>
            </not>
        </preConditions>
        <comment>Создание индекса колонки AREA_COUNT_LIMIT_CODE таблицы PR_AREA_TYPE_ATTRS</comment>
        <createIndex indexName="IXFK_PR_AREA_TYPE_AREA_COUNT"
                     tableName="PR_AREA_TYPE_ATTRS"
                     unique="false">
            <column name="AREA_COUNT_LIMIT_CODE" type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="EMIASUPK-7594-11-3" author="sorlov" labels="1.0.0.0">
        <preConditions onFail="MARK_RAN">
            <columnExists tableName="PR_AREA_TYPE_ATTRS" columnName="AREA_TYPE_CODE" />
            <columnExists tableName="AREA_TYPES" columnName="CODE" />
        </preConditions>
        <comment>Создание внешнего ключа FK_AREA_TYPE_ATTRS_AREA_TYPE</comment>
        <addForeignKeyConstraint baseColumnNames="AREA_TYPE_CODE"
                                 baseTableName="PR_AREA_TYPE_ATTRS"
                                 constraintName="FK_AREA_TYPE_ATTRS_AREA_TYPE"
                                 referencedColumnNames="CODE"
                                 referencedTableName="AREA_TYPES"/>
    </changeSet>

    <changeSet id="EMIASUPK-7594-11-4" author="sorlov" labels="1.0.0.0">
        <preConditions onFail="MARK_RAN">
            <columnExists tableName="PR_AREA_TYPE_ATTRS" columnName="AREA_COUNT_LIMIT_CODE" />
            <columnExists tableName="AREA_COUNT_LIMIT" columnName="CODE" />
        </preConditions>
        <comment>Создание внешнего ключа FK_PR_AREA_TYPE_AREA_COUNT</comment>
        <addForeignKeyConstraint baseColumnNames="AREA_COUNT_LIMIT_CODE"
                                 baseTableName="PR_AREA_TYPE_ATTRS"
                                 constraintName="FK_PR_AREA_TYPE_AREA_COUNT"
                                 referencedColumnNames="CODE"
                                 referencedTableName="AREA_COUNT_LIMIT"/>
    </changeSet>

    <changeSet id="EMIASUPK-7594-12" author="sorlov" labels="1.0.0.0">
        <preConditions onFail="MARK_RAN">
            <not>
                <tableExists tableName="REGISTRY_BUILDING"/>
            </not>
        </preConditions>
        <comment>Создание таблицы REGISTRY_BUILDING</comment>
        <createTable tableName="REGISTRY_BUILDING"
                     remarks="Реестр зданий и сооружений">
            <column name="ID" type="NUMBER(20)">
                <constraints primaryKey="true" nullable="false" />
            </column>
            <column name="ADDRESS_ELEMENT" type="VARCHAR2(500)" remarks="Адресообразующий элемент" />
        </createTable>
        <rollback>
            <dropTable tableName="REGISTRY_BUILDING"/>
        </rollback>
    </changeSet>

    <changeSet id="EMIASUPK-7594-13" author="sorlov" labels="1.0.0.0">
        <preConditions onFail="MARK_RAN">
            <not>
                <tableExists tableName="SPECIALIZATION_TO_POSITION_NOM"/>
            </not>
        </preConditions>
        <comment>Создание таблицы SPECIALIZATION_TO_POSITION_NOM</comment>
        <createTable tableName="SPECIALIZATION_TO_POSITION_NOM">
            <column name="SPECIALIZATION_ID" type="NUMBER(20)">
                <constraints nullable="false" />
            </column>
            <column name="POSITION_NOM_ID" type="NUMBER(20)">
                <constraints nullable="false" />
            </column>
            <column name="ARCHIVED" type="NUMBER(1)" defaultValue="0">
                <constraints nullable="false" />
            </column>
        </createTable>
        <rollback>
            <dropTable tableName="SPECIALIZATION_TO_POSITION_NOM"/>
        </rollback>
    </changeSet>

    <changeSet id="EMIASUPK-7594-13-1" author="sorlov" labels="1.0.0.0">
        <preConditions onFail="MARK_RAN">
            <not>
                <indexExists indexName="IXFK_SPEC_SPEC_ID"/>
            </not>
        </preConditions>
        <comment>Создание индекса колонки SPECIALIZATION_ID таблицы SPECIALIZATION_TO_POSITION_NOM</comment>
        <createIndex indexName="IXFK_SPEC_SPEC_ID"
                     tableName="SPECIALIZATION_TO_POSITION_NOM"
                     unique="false">
            <column name="SPECIALIZATION_ID" type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="EMIASUPK-7594-13-2" author="sorlov" labels="1.0.0.0">
        <preConditions onFail="MARK_RAN">
            <not>
                <indexExists indexName="IXFK_SPECIALIZATI_POSITIO01"/>
            </not>
        </preConditions>
        <comment>Создание индекса колонки POSITION_NOM_ID таблицы SPECIALIZATION_TO_POSITION_NOM</comment>
        <createIndex indexName="IXFK_SPECIALIZATI_POSITIO01"
                     tableName="SPECIALIZATION_TO_POSITION_NOM"
                     unique="false">
            <column name="POSITION_NOM_ID" type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="EMIASUPK-7594-13-3" author="sorlov" labels="1.0.0.0">
        <preConditions onFail="MARK_RAN">
            <columnExists tableName="SPECIALIZATION_TO_POSITION_NOM" columnName="POSITION_NOM_ID" />
            <columnExists tableName="POSITION_NOM" columnName="ID" />
        </preConditions>
        <comment>Создание внешнего ключа FK_SPECIALIZATI_POSITION_NO_01</comment>
        <addForeignKeyConstraint baseColumnNames="POSITION_NOM_ID"
                                 baseTableName="SPECIALIZATION_TO_POSITION_NOM"
                                 constraintName="FK_SPECIALIZATI_POSITION_NO_01"
                                 referencedColumnNames="ID"
                                 referencedTableName="POSITION_NOM"/>
    </changeSet>

    <changeSet id="EMIASUPK-7594-13-4" author="sorlov" labels="1.0.0.0">
        <preConditions onFail="MARK_RAN">
            <columnExists tableName="SPECIALIZATION_TO_POSITION_NOM" columnName="SPECIALIZATION_ID" />
            <columnExists tableName="SPECIALIZATION" columnName="ID" />
        </preConditions>
        <comment>Создание внешнего ключа FK_SPEC_SPEC_ID</comment>
        <addForeignKeyConstraint baseColumnNames="SPECIALIZATION_ID"
                                 baseTableName="SPECIALIZATION_TO_POSITION_NOM"
                                 constraintName="FK_SPEC_SPEC_ID"
                                 referencedColumnNames="ID"
                                 referencedTableName="SPECIALIZATION"/>
    </changeSet>

    <changeSet id="EMIASUPK-7598-1" author="sorlov" labels="1.0.0.0">
        <preConditions onFail="MARK_RAN">
            <not>
                <tableExists tableName="AREAS"/>
            </not>
        </preConditions>
        <comment>Создание таблицы AREAS</comment>
        <createTable tableName="AREAS"
                     remarks="Участок">
            <column name="ID" type="NUMBER(20)">
                <constraints primaryKey="true" nullable="false" />
            </column>
            <column name="MO_ID" type="NUMBER(20)" remarks="ИД МО" />
            <column name="AREA_TYPE_CODE" type="NUMBER(20)" remarks="Тип участка. Код" />
            <column name="NAME" type="VARCHAR2(255)" remarks="Наименование" />
            <column name="NUMBER" type="NUMBER(5)" remarks="Номер" />
            <column name="IS_AUTO_ASSIGN_FOR_ATTACH" type="NUMBER(1)" remarks="Для автоприкрепления" />
            <column name="ACTUAL" type="NUMBER(1)" />
            <column name="DESCRIPTION" type="VARCHAR2(370)" />
            <column name="ATTACH_BY_MEDICAL_REASON" type="NUMBER(1)" />
            <column name="AGE_MIN" type="NUMBER(8)" remarks="Возраст мин" />
            <column name="AGE_MAX" type="NUMBER(8)" remarks="Возраст макс" />
            <column name="AGE_M_MIN" type="NUMBER(8)" remarks="Возраст М мин" />
            <column name="AGE_M_MAX" type="NUMBER(8)" remarks="Возраст М макс" />
            <column name="AGE_W_MIN" type="NUMBER(8)" remarks="Возраст Ж мин" />
            <column name="AGE_W_MAX" type="NUMBER(8)" remarks="Возраст Ж макс" />
        </createTable>
        <rollback>
            <dropTable tableName="AREAS"/>
        </rollback>
    </changeSet>

    <changeSet id="EMIASUPK-7598-1-1" author="sorlov" labels="1.0.0.0">
        <preConditions onFail="MARK_RAN">
            <not>
                <indexExists indexName="IXFK_AREA_AREA_TYPE"/>
            </not>
        </preConditions>
        <comment>Создание индекса колонки AREA_TYPE_CODE таблицы AREAS</comment>
        <createIndex indexName="IXFK_AREA_AREA_TYPE"
                     tableName="AREAS"
                     unique="false">
            <column name="AREA_TYPE_CODE" type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="EMIASUPK-7598-1-2" author="sorlov" labels="1.0.0.0">
        <preConditions onFail="MARK_RAN">
            <columnExists tableName="AREAS" columnName="AREA_TYPE_CODE" />
            <columnExists tableName="AREA_TYPES" columnName="CODE" />
        </preConditions>
        <comment>Создание внешнего ключа FK_AREA_AREA_TYPE01</comment>
        <addForeignKeyConstraint baseColumnNames="AREA_TYPE_CODE"
                                 baseTableName="AREAS"
                                 constraintName="FK_AREA_AREA_TYPE01"
                                 referencedColumnNames="CODE"
                                 referencedTableName="AREA_TYPES"/>
    </changeSet>

    <changeSet id="EMIASUPK-7598-2" author="sorlov" labels="1.0.0.0">
        <preConditions onFail="MARK_RAN">
            <not>
                <tableExists tableName="AREA_MEDICAL_EMPLOYEE"/>
            </not>
        </preConditions>
        <comment>Создание таблицы AREA_MEDICAL_EMPLOYEE</comment>
        <createTable tableName="AREA_MEDICAL_EMPLOYEE"
                     remarks="МР на участке">
            <column name="ID" type="VARCHAR2(50)">
                <constraints primaryKey="true" nullable="false" />
            </column>
            <column name="MEDICAL_EMPLOYEE_JOB_INFO_ID" type="NUMBER(20)" remarks="ИД Исполнения должности" />
            <column name="AREA_ID" type="NUMBER(20)" />
            <column name="IS_REPLACEMENT" type="NUMBER(1)" remarks="Роль МУ на участке (тип обслуживнаия)" />
            <column name="START_DATE" type="TIMESTAMP(6)" remarks="Дата начала работы на участке" />
            <column name="END_DATE" type="TIMESTAMP(6)" remarks="Дата окончания работы на участке" />
            <column name="MEDICAL_EMPLOYEE_ID" type="NUMBER(20)" />
            <column name="MEDICAL_POSITION_ID" type="NUMBER(20)" />
        </createTable>
        <rollback>
            <dropTable tableName="AREA_MEDICAL_EMPLOYEE"/>
        </rollback>
    </changeSet>

    <changeSet id="EMIASUPK-7598-2-1" author="sorlov" labels="1.0.0.0">
        <preConditions onFail="MARK_RAN">
            <not>
                <indexExists indexName="IXFK_AREA_MEDICAL_EMPLOYEE"/>
            </not>
        </preConditions>
        <comment>Создание индекса колонки AREA_ID таблицы AREA_MEDICAL_EMPLOYEE</comment>
        <createIndex indexName="IXFK_AREA_MEDICAL_EMPLOYEE"
                     tableName="AREA_MEDICAL_EMPLOYEE"
                     unique="false">
            <column name="AREA_ID" type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="EMIASUPK-7598-2-2" author="sorlov" labels="1.0.0.0">
        <preConditions onFail="MARK_RAN">
            <columnExists tableName="AREA_MEDICAL_EMPLOYEE" columnName="AREA_ID" />
            <columnExists tableName="AREAS" columnName="ID" />
        </preConditions>
        <comment>Создание внешнего ключа FK_AREA_MEDICAL_EMPLOYEE_ARE02</comment>
        <addForeignKeyConstraint baseColumnNames="AREA_ID"
                                 baseTableName="AREA_MEDICAL_EMPLOYEE"
                                 constraintName="FK_AREA_MEDICAL_EMPLOYEE_ARE02"
                                 referencedColumnNames="ID"
                                 referencedTableName="AREAS"/>
    </changeSet>

    <changeSet id="EMIASUPK-7598-3" author="sorlov" labels="1.0.0.0">
        <preConditions onFail="MARK_RAN">
            <not>
                <tableExists tableName="AREA_TO_AREA_TYPE"/>
            </not>
        </preConditions>
        <comment>Создание таблицы AREA_TO_AREA_TYPE</comment>
        <createTable tableName="AREA_TO_AREA_TYPE"
                     remarks="МР на участке">
            <column name="ID" type="NUMBER(20)">
                <constraints primaryKey="true" nullable="false" />
            </column>
            <column name="AREA_ID" type="NUMBER(20)">
                <constraints nullable="false" />
            </column>
            <column name="AREA_TYPE_CODE" type="NUMBER(20)" remarks="Тип участка. Код">
                <constraints nullable="false" />
            </column>
        </createTable>
        <rollback>
            <dropTable tableName="AREA_TO_AREA_TYPE"/>
        </rollback>
    </changeSet>

    <changeSet id="EMIASUPK-7598-3-1" author="sorlov" labels="1.0.0.0">
        <preConditions onFail="MARK_RAN">
            <not>
                <indexExists indexName="IXFK_AREA_TO_AREA_TYPE_AREAS"/>
            </not>
        </preConditions>
        <comment>Создание индекса колонки AREA_ID таблицы AREA_TO_AREA_TYPE</comment>
        <createIndex indexName="IXFK_AREA_TO_AREA_TYPE_AREAS"
                     tableName="AREA_TO_AREA_TYPE"
                     unique="false">
            <column name="AREA_ID" type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="EMIASUPK-7598-3-2" author="sorlov" labels="1.0.0.0">
        <preConditions onFail="MARK_RAN">
            <not>
                <indexExists indexName="IXFK_AREA_TO_AREA__AREA_T01"/>
            </not>
        </preConditions>
        <comment>Создание индекса колонки AREA_TYPE_CODE таблицы AREA_TO_AREA_TYPE</comment>
        <createIndex indexName="IXFK_AREA_TO_AREA__AREA_T01"
                     tableName="AREA_TO_AREA_TYPE"
                     unique="false">
            <column name="AREA_TYPE_CODE" type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="EMIASUPK-7598-3-3" author="sorlov" labels="1.0.0.0">
        <preConditions onFail="MARK_RAN">
            <columnExists tableName="AREA_TO_AREA_TYPE" columnName="AREA_ID" />
            <columnExists tableName="AREAS" columnName="ID" />
        </preConditions>
        <comment>Создание внешнего ключа FK_AREA_TO_AREA_TYPE_AREAS</comment>
        <addForeignKeyConstraint baseColumnNames="AREA_ID"
                                 baseTableName="AREA_TO_AREA_TYPE"
                                 constraintName="FK_AREA_TO_AREA_TYPE_AREAS"
                                 referencedColumnNames="ID"
                                 referencedTableName="AREAS"/>
    </changeSet>

    <changeSet id="EMIASUPK-7598-3-4" author="sorlov" labels="1.0.0.0">
        <preConditions onFail="MARK_RAN">
            <columnExists tableName="AREA_TO_AREA_TYPE" columnName="AREA_TYPE_CODE" />
            <columnExists tableName="AREA_TYPES" columnName="CODE" />
        </preConditions>
        <comment>Создание внешнего ключа FK_AREA_TO_AREA_AREA_TYPES_01</comment>
        <addForeignKeyConstraint baseColumnNames="AREA_TYPE_CODE"
                                 baseTableName="AREA_TO_AREA_TYPE"
                                 constraintName="FK_AREA_TO_AREA_AREA_TYPES_01"
                                 referencedColumnNames="CODE"
                                 referencedTableName="AREA_TYPES"/>
    </changeSet>

    <changeSet id="EMIASUPK-7598-4" author="sorlov" labels="1.0.0.0">
        <preConditions onFail="MARK_RAN">
            <not>
                <tableExists tableName="MU_PROFILES"/>
            </not>
        </preConditions>
        <comment>Создание таблицы MU_PROFILES</comment>
        <createTable tableName="MU_PROFILES"
                     remarks="Профиль МУ">
            <column name="MU_ID" type="NUMBER(20)">
                <constraints primaryKey="true" nullable="false" />
            </column>
            <column name="AREA_TYPE_CODE" type="NUMBER(20)" remarks="Тип участка. Код" />
        </createTable>
        <rollback>
            <dropTable tableName="MU_PROFILES"/>
        </rollback>
    </changeSet>

    <changeSet id="EMIASUPK-7598-4-1" author="sorlov" labels="1.0.0.0">
        <preConditions onFail="MARK_RAN">
            <not>
                <indexExists indexName="IXFK_PROFILE_MU_AREA_TYPE"/>
            </not>
        </preConditions>
        <comment>Создание индекса колонки AREA_TYPE_CODE таблицы MU_PROFILES</comment>
        <createIndex indexName="IXFK_PROFILE_MU_AREA_TYPE"
                     tableName="MU_PROFILES"
                     unique="false">
            <column name="AREA_TYPE_CODE" type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="EMIASUPK-7598-4-2" author="sorlov" labels="1.0.0.0">
        <preConditions onFail="MARK_RAN">
            <columnExists tableName="MU_PROFILES" columnName="AREA_TYPE_CODE" />
            <columnExists tableName="AREA_TYPES" columnName="CODE" />
        </preConditions>
        <comment>Создание внешнего ключа FK_PROFILE_MU_AREA_TYPE</comment>
        <addForeignKeyConstraint baseColumnNames="AREA_TYPE_CODE"
                                 baseTableName="MU_PROFILES"
                                 constraintName="FK_PROFILE_MU_AREA_TYPE"
                                 referencedColumnNames="CODE"
                                 referencedTableName="AREA_TYPES"/>
    </changeSet>

    <changeSet id="EMIASUPK-7598-5" author="sorlov" labels="1.0.0.0">
        <preConditions onFail="MARK_RAN">
            <not>
                <tableExists tableName="ORDER_ADDRESS_ALLOCATION"/>
            </not>
        </preConditions>
        <comment>Создание таблицы ORDER_ADDRESS_ALLOCATION</comment>
        <createTable tableName="ORDER_ADDRESS_ALLOCATION"
                     remarks="Распоряжение о распределении территории">
            <column name="ID" type="NUMBER(20)" remarks="ИД распоряжения">
                <constraints primaryKey="true" nullable="false" />
            </column>
            <column name="NUMBER" type="VARCHAR2(255)" remarks="Номер">
                <constraints nullable="false" />
            </column>
            <column name="NAME" type="VARCHAR2(255)" remarks="Наименование" />
            <column name="DATE" type="TIMESTAMP(6)" remarks="Дата распоряжения" />
            <column name="MO_ID" type="NUMBER(20)" remarks="ИД МО" />
            <column name="OUZ" type="VARCHAR2(50)" />
        </createTable>
        <rollback>
            <dropTable tableName="ORDER_ADDRESS_ALLOCATION"/>
        </rollback>
    </changeSet>

    <changeSet id="EMIASUPK-7598-6" author="sorlov" labels="1.0.0.0">
        <preConditions onFail="MARK_RAN">
            <not>
                <tableExists tableName="ADDRESS_ALLOCATION_TO_MO"/>
            </not>
        </preConditions>
        <comment>Создание таблицы ADDRESS_ALLOCATION_TO_MO</comment>
        <createTable tableName="ADDRESS_ALLOCATION_TO_MO"
                     remarks="Распределение к МО">
            <column name="ID" type="NUMBER(20)">
                <constraints primaryKey="true" nullable="false" />
            </column>
            <column name="MO_ID" type="NUMBER(20)" remarks="ИД МО" />
            <column name="AREA_TYPE_CODE" type="NUMBER(20)" remarks="Тип участка. Код" />
            <column name="ORDER_ID" type="NUMBER(20)" remarks="ИД распоряжения о распределении" />
            <column name="START_DATE" type="TIMESTAMP(6)" remarks="Дата начала распределения" />
            <column name="END_DATE" type="TIMESTAMP(6)" remarks="Дата окончания распределения" />
            <column name="REJECT_ORDER_ID" type="NUMBER(20)" remarks="ИД распоряжения об отмене распределения" />
            <column name="ARCHIVE_REASON" type="VARCHAR2(255)" remarks="Причина архивирования" />
            <column name="ADDRESS_FORMING_ELEMENT_ID" type="NUMBER(20)" />
            <column name="REGISTRY_BUILDING_ID" type="NUMBER(20)" />
        </createTable>
        <rollback>
            <dropTable tableName="ADDRESS_ALLOCATION_TO_MO"/>
        </rollback>
    </changeSet>

    <changeSet id="EMIASUPK-7598-6-1" author="sorlov" labels="1.0.0.0">
        <preConditions onFail="MARK_RAN">
            <not>
                <indexExists indexName="IXFK_ADDRESS_ALLO_ORDER"/>
            </not>
        </preConditions>
        <comment>Создание индекса колонки ORDER_ID таблицы ADDRESS_ALLOCATION_TO_MO</comment>
        <createIndex indexName="IXFK_ADDRESS_ALLO_ORDER"
                     tableName="ADDRESS_ALLOCATION_TO_MO"
                     unique="false">
            <column name="ORDER_ID" type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="EMIASUPK-7598-6-2" author="sorlov" labels="1.0.0.0">
        <preConditions onFail="MARK_RAN">
            <not>
                <indexExists indexName="IXFK_ADDRESS_ALLO_ORDER_REJECT"/>
            </not>
        </preConditions>
        <comment>Создание индекса колонки REJECT_ORDER_ID таблицы ADDRESS_ALLOCATION_TO_MO</comment>
        <createIndex indexName="IXFK_ADDRESS_ALLO_ORDER_REJECT"
                     tableName="ADDRESS_ALLOCATION_TO_MO"
                     unique="false">
            <column name="REJECT_ORDER_ID" type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="EMIASUPK-7598-6-3" author="sorlov" labels="1.0.0.0">
        <preConditions onFail="MARK_RAN">
            <not>
                <indexExists indexName="IXFK_DISTRIBUTION_ADDRESS"/>
            </not>
        </preConditions>
        <comment>Создание индекса колонки ADDRESS_FORMING_ELEMENT_ID таблицы ADDRESS_ALLOCATION_TO_MO</comment>
        <createIndex indexName="IXFK_DISTRIBUTION_ADDRESS"
                     tableName="ADDRESS_ALLOCATION_TO_MO"
                     unique="false">
            <column name="ADDRESS_FORMING_ELEMENT_ID" type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="EMIASUPK-7598-6-4" author="sorlov" labels="1.0.0.0">
        <preConditions onFail="MARK_RAN">
            <not>
                <indexExists indexName="IXFK_DISTRIBUTION_REGISTR"/>
            </not>
        </preConditions>
        <comment>Создание индекса колонки REGISTRY_BUILDING_ID таблицы ADDRESS_ALLOCATION_TO_MO</comment>
        <createIndex indexName="IXFK_DISTRIBUTION_REGISTR"
                     tableName="ADDRESS_ALLOCATION_TO_MO"
                     unique="false">
            <column name="REGISTRY_BUILDING_ID" type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="EMIASUPK-7598-6-5" author="sorlov" labels="1.0.0.0">
        <preConditions onFail="MARK_RAN">
            <not>
                <indexExists indexName="IXFK_ADDRESS_ALLO_TYPE"/>
            </not>
        </preConditions>
        <comment>Создание индекса колонки AREA_TYPE_CODE таблицы ADDRESS_ALLOCATION_TO_MO</comment>
        <createIndex indexName="IXFK_ADDRESS_ALLO_TYPE"
                     tableName="ADDRESS_ALLOCATION_TO_MO"
                     unique="false">
            <column name="AREA_TYPE_CODE" type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="EMIASUPK-7598-6-6" author="sorlov" labels="1.0.0.0">
        <preConditions onFail="MARK_RAN">
            <columnExists tableName="ADDRESS_ALLOCATION_TO_MO" columnName="ORDER_ID" />
            <columnExists tableName="ORDER_ADDRESS_ALLOCATION" columnName="ID" />
        </preConditions>
        <comment>Создание внешнего ключа FK_ADDRESS_ALLO_ORDER_ADDR_ORDER</comment>
        <addForeignKeyConstraint baseColumnNames="ORDER_ID"
                                 baseTableName="ADDRESS_ALLOCATION_TO_MO"
                                 constraintName="FK_ADDRESS_ALLO_ORDER_ADDR_ORDER"
                                 referencedColumnNames="ID"
                                 referencedTableName="ORDER_ADDRESS_ALLOCATION"/>
    </changeSet>

    <changeSet id="EMIASUPK-7598-6-7" author="sorlov" labels="1.0.0.0">
        <preConditions onFail="MARK_RAN">
            <columnExists tableName="ADDRESS_ALLOCATION_TO_MO" columnName="REJECT_ORDER_ID" />
            <columnExists tableName="ORDER_ADDRESS_ALLOCATION" columnName="ID" />
        </preConditions>
        <comment>Создание внешнего ключа FK_ADDRESS_ALLO_ORDER_ADDR_REJECT</comment>
        <addForeignKeyConstraint baseColumnNames="REJECT_ORDER_ID"
                                 baseTableName="ADDRESS_ALLOCATION_TO_MO"
                                 constraintName="FK_ADDRESS_ALLO_ORDER_ADDR_REJECT"
                                 referencedColumnNames="ID"
                                 referencedTableName="ORDER_ADDRESS_ALLOCATION"/>
    </changeSet>

    <changeSet id="EMIASUPK-7598-6-8" author="sorlov" labels="1.0.0.0">
        <preConditions onFail="MARK_RAN">
            <columnExists tableName="ADDRESS_ALLOCATION_TO_MO" columnName="ADDRESS_FORMING_ELEMENT_ID" />
            <columnExists tableName="ADDRESS_FORMING_ELEMENT" columnName="ID" />
        </preConditions>
        <comment>Создание внешнего ключа FK_DISTRIBUTION_ADDRESS_FORM</comment>
        <addForeignKeyConstraint baseColumnNames="ADDRESS_FORMING_ELEMENT_ID"
                                 baseTableName="ADDRESS_ALLOCATION_TO_MO"
                                 constraintName="FK_DISTRIBUTION_ADDRESS_FORM"
                                 referencedColumnNames="ID"
                                 referencedTableName="ADDRESS_FORMING_ELEMENT"/>
    </changeSet>

    <changeSet id="EMIASUPK-7598-6-9" author="sorlov" labels="1.0.0.0">
        <preConditions onFail="MARK_RAN">
            <columnExists tableName="ADDRESS_ALLOCATION_TO_MO" columnName="REGISTRY_BUILDING_ID" />
            <columnExists tableName="REGISTRY_BUILDING" columnName="ID" />
        </preConditions>
        <comment>Создание внешнего ключа FK_DISTRIBUTION_REGISTRY_BUILDING</comment>
        <addForeignKeyConstraint baseColumnNames="REGISTRY_BUILDING_ID"
                                 baseTableName="ADDRESS_ALLOCATION_TO_MO"
                                 constraintName="FK_DISTRIBUTION_REGISTRY_BUILDING"
                                 referencedColumnNames="ID"
                                 referencedTableName="REGISTRY_BUILDING"/>
    </changeSet>

    <changeSet id="EMIASUPK-7598-6-10" author="sorlov" labels="1.0.0.0">
        <preConditions onFail="MARK_RAN">
            <columnExists tableName="ADDRESS_ALLOCATION_TO_MO" columnName="AREA_TYPE_CODE" />
            <columnExists tableName="AREA_TYPES" columnName="CODE" />
        </preConditions>
        <comment>Создание внешнего ключа FK_DISTRIBUTION_AREA_TYPE</comment>
        <addForeignKeyConstraint baseColumnNames="AREA_TYPE_CODE"
                                 baseTableName="ADDRESS_ALLOCATION_TO_MO"
                                 constraintName="FK_DISTRIBUTION_AREA_TYPE"
                                 referencedColumnNames="CODE"
                                 referencedTableName="AREA_TYPES"/>
    </changeSet>

    <changeSet id="EMIASUPK-7598-7" author="sorlov" labels="1.0.0.0">
        <preConditions onFail="MARK_RAN">
            <not>
                <tableExists tableName="ADDRESS_ALLOCATION_TO_AREA"/>
            </not>
        </preConditions>
        <comment>Создание таблицы ADDRESS_ALLOCATION_TO_AREA</comment>
        <createTable tableName="ADDRESS_ALLOCATION_TO_AREA"
                     remarks="Распределение к участку">
            <column name="DISTRIBUTION_TO_MO_ID" type="NUMBER(20)" />
            <column name="AREA_ID" type="NUMBER(20)" remarks="ИД участка" />
            <column name="START_DATE" type="TIMESTAMP(6)" remarks="Дата начала" />
            <column name="END_DATE" type="TIMESTAMP(6)" remarks="Дата окончания" />
        </createTable>
        <rollback>
            <dropTable tableName="ADDRESS_ALLOCATION_TO_AREA"/>
        </rollback>
    </changeSet>

    <changeSet id="EMIASUPK-7598-7-1" author="sorlov" labels="1.0.0.0">
        <preConditions onFail="MARK_RAN">
            <not>
                <indexExists indexName="IXFK_DISTRIBUTION_DISTRIB01"/>
            </not>
        </preConditions>
        <comment>Создание индекса колонки DISTRIBUTION_TO_MO_ID таблицы ADDRESS_ALLOCATION_TO_AREA</comment>
        <createIndex indexName="IXFK_DISTRIBUTION_DISTRIB01"
                     tableName="ADDRESS_ALLOCATION_TO_AREA"
                     unique="false">
            <column name="DISTRIBUTION_TO_MO_ID" type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="EMIASUPK-7598-7-2" author="sorlov" labels="1.0.0.0">
        <preConditions onFail="MARK_RAN">
            <not>
                <indexExists indexName="IXFK_DISTRIBUTION_TO_AREA_AREA"/>
            </not>
        </preConditions>
        <comment>Создание индекса колонки AREA_ID таблицы ADDRESS_ALLOCATION_TO_AREA</comment>
        <createIndex indexName="IXFK_DISTRIBUTION_TO_AREA_AREA"
                     tableName="ADDRESS_ALLOCATION_TO_AREA"
                     unique="false">
            <column name="AREA_ID" type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="EMIASUPK-7598-7-3" author="sorlov" labels="1.0.0.0">
        <preConditions onFail="MARK_RAN">
            <columnExists tableName="ADDRESS_ALLOCATION_TO_AREA" columnName="DISTRIBUTION_TO_MO_ID" />
            <columnExists tableName="ADDRESS_ALLOCATION_TO_MO" columnName="ID" />
        </preConditions>
        <comment>Создание внешнего ключа FK_DISTRIBUTION_DISTRIBUTIO_01</comment>
        <addForeignKeyConstraint baseColumnNames="DISTRIBUTION_TO_MO_ID"
                                 baseTableName="ADDRESS_ALLOCATION_TO_AREA"
                                 constraintName="FK_DISTRIBUTION_DISTRIBUTIO_01"
                                 referencedColumnNames="ID"
                                 referencedTableName="ADDRESS_ALLOCATION_TO_MO"/>
    </changeSet>

    <changeSet id="EMIASUPK-7598-7-4" author="sorlov" labels="1.0.0.0">
        <preConditions onFail="MARK_RAN">
            <columnExists tableName="ADDRESS_ALLOCATION_TO_AREA" columnName="AREA_ID" />
            <columnExists tableName="AREAS" columnName="ID" />
        </preConditions>
        <comment>Создание внешнего ключа FK_DISTRIBUTION_TO_AREA_AREA</comment>
        <addForeignKeyConstraint baseColumnNames="AREA_ID"
                                 baseTableName="ADDRESS_ALLOCATION_TO_AREA"
                                 constraintName="FK_DISTRIBUTION_TO_AREA_AREA"
                                 referencedColumnNames="ID"
                                 referencedTableName="AREAS"/>
    </changeSet>

    <changeSet id="EMIASUPK-7598-10-1" author="sorlov" labels="1.0.0.0">
        <preConditions onFail="MARK_RAN">
            <tableExists tableName="MU_PROFILES"/>
        </preConditions>
        <comment>Изменение таблицы MU_PROFILES - удаление первичного ключа MU_ID</comment>
        <dropPrimaryKey constraintName="MU_PROFILES_PKEY"
                        tableName="MU_PROFILES"/>
        <rollback>
        </rollback>
    </changeSet>

    <changeSet id="EMIASUPK-7598-10-2" author="sorlov" labels="1.0.0.0">
        <preConditions onFail="MARK_RAN">
            <tableExists tableName="MU_PROFILES"/>
        </preConditions>
        <comment>Изменение таблицы MU_PROFILES - создание первичного ключа ID</comment>
        <addColumn tableName="MU_PROFILES">
            <column name="ID" type="NUMBER(20)">
                <constraints primaryKey="true" nullable="false" />
            </column>
        </addColumn>
        <rollback>
            <dropColumn tableName="MU_PROFILES" columnName="ID" />
        </rollback>
    </changeSet>

    <changeSet id="EMIASUPK-7598-10-3" author="sorlov" labels="1.0.0.0">
        <preConditions onFail="MARK_RAN">
            <not>
                <indexExists indexName="IX_MU_PROFILES_MU_ID"/>
            </not>
        </preConditions>
        <comment>Изменение таблицы MU_PROFILES - создание индекса MU_ID</comment>
        <createIndex indexName="IX_MU_PROFILES_MU_ID"
                     tableName="MU_PROFILES"
                     unique="false">
            <column name="MU_ID" type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="EMIASUPK-7598-11-1" author="sorlov">
        <preConditions onFail="MARK_RAN">
            <not>
                <sequenceExists sequenceName="SEQ_MU_PROFILES"/>
            </not>
        </preConditions>
        <comment>Создание сиквенса для таблицы MU_PROFILES</comment>
        <createSequence sequenceName="SEQ_MU_PROFILES"/>
        <rollback>
            <dropSequence sequenceName="SEQ_MU_PROFILES"/>
        </rollback>
    </changeSet>

    <changeSet id="EMIASUPK-7598-11-2" author="sorlov">
        <preConditions onFail="MARK_RAN">
            <not>
                <sequenceExists sequenceName="SEQ_AREAS"/>
            </not>
        </preConditions>
        <comment>Создание сиквенса для таблицы AREAS</comment>
        <createSequence sequenceName="SEQ_AREAS"/>
        <rollback>
            <dropSequence sequenceName="SEQ_AREAS"/>
        </rollback>
    </changeSet>

    <changeSet id="EMIASUPK-7598-11-3" author="sorlov">
        <preConditions onFail="MARK_RAN">
            <not>
                <sequenceExists sequenceName="SEQ_AREA_TO_AREA_TYPE"/>
            </not>
        </preConditions>
        <comment>Создание сиквенса для таблицы AREA_TO_AREA_TYPE</comment>
        <createSequence sequenceName="SEQ_AREA_TO_AREA_TYPE"/>
        <rollback>
            <dropSequence sequenceName="SEQ_AREA_TO_AREA_TYPE"/>
        </rollback>
    </changeSet>

    <changeSet id="EMIASUPK-7598-12" author="sorlov" labels="1.0.0.0">
        <preConditions onFail="MARK_RAN">
            <not>
                <columnExists tableName="AREAS" columnName="MU_ID" />
            </not>
        </preConditions>
        <addColumn tableName="AREAS">
            <column name="MU_ID" type="number(20)">
                <constraints nullable="false" />
            </column>
        </addColumn>
        <rollback>
            <dropColumn tableName="AREAS" columnName="MU_ID" />
        </rollback>
    </changeSet>

    <changeSet id="EMIASUPK-7598-13" author="sorlov" labels="1.0.0.0">
        <preConditions onFail="MARK_RAN">
            <not>
                <indexExists indexName="IX_AREAS_MU_ID"/>
            </not>
        </preConditions>
        <comment>Создание индекса колонки MU_ID таблицы AREAS</comment>
        <createIndex indexName="IX_AREAS_MU_ID"
                     tableName="AREAS"
                     unique="false">
            <column name="MU_ID" type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="EMIASUPK-7645-1" author="sorlov" labels="1.0.0.0">
        <preConditions onFail="MARK_RAN">
            <not>
                <tableExists tableName="ESU_OUTPUT"/>
            </not>
        </preConditions>
        <comment>Создание таблицы ESU_OUTPUT</comment>
        <createTable tableName="ESU_OUTPUT"
                     remarks="Журнал отправленных сообщений в сервис ЕСУ">
            <column name="ID" type="NUMBER(20)">
                <constraints primaryKey="true" nullable="false" />
            </column>
            <column name="ESU_ID" type="VARCHAR2(255)" remarks="Идентификатор записи в сервисе ЕСУ" />
            <column name="OFFSET" type="NUMBER(20)" remarks="Оффсет отправленного сообщения" />
            <column name="PARTITION" type="NUMBER(8)" remarks="Раздел, в которое было отправленно сообщение" />
            <column name="SENT_TIME" type="TIMESTAMP(6)" remarks="timestamp отправленного сообщения">
                <constraints nullable="false" />
            </column>
            <column name="TOPIC" type="VARCHAR2(255)" remarks="Название топика отправленно сообщение">
                <constraints nullable="false" />
            </column>
            <column name="MESSAGE" type="CLOB" remarks="Текст сообщения">
                <constraints nullable="false" />
            </column>
            <column name="STATUS" type="NUMBER(1)" remarks="Признак синхроназации: 0-не успешно, 1-успешно, 2-в процессе">
                <constraints nullable="false" />
            </column>
        </createTable>
        <rollback>
            <dropTable tableName="ESU_OUTPUT"/>
        </rollback>
    </changeSet>

    <changeSet id="EMIASUPK-7645-2" author="sorlov" labels="1.0.0.0">
        <preConditions onFail="MARK_RAN">
            <not>
                <indexExists indexName="IDX_ESU_OUTPUT_ESU_ID"/>
            </not>
        </preConditions>
        <comment>Создание индекса колонки ESU_ID таблицы ESU_OUTPUT</comment>
        <createIndex indexName="IDX_ESU_OUTPUT_ESU_ID"
                     tableName="ESU_OUTPUT"
                     unique="false">
            <column name="ESU_ID" type="string"/>
        </createIndex>
    </changeSet>

    <changeSet id="EMIASUPK-7645-3" author="sorlov" labels="1.0.0.0">
        <preConditions onFail="MARK_RAN">
            <columnExists tableName="ESU_OUTPUT" columnName="STATUS"/>
        </preConditions>
        <comment>Создание ограничения столбца STATUS таблицы ESU_OUTPUT</comment>
        <sql>
            alter table ESU_OUTPUT add constraint "ESU_OUTPUT_CK1" check (STATUS in ('0','1','2'));
        </sql>
        <rollback>
            <dropUniqueConstraint constraintName="ESU_OUTPUT_CK1"
                                  tableName="ESU_OUTPUT"/>
        </rollback>
    </changeSet>

    <changeSet id="EMIASUPK-7645-4" author="sorlov" labels="1.0.0.0">
        <preConditions onFail="MARK_RAN">
            <not>
                <sequenceExists sequenceName="ESU_OUTPUT_SEQ_ID"/>
            </not>
        </preConditions>
        <comment>Создание сиквенса для таблицы ESU_OUTPUT</comment>
        <createSequence sequenceName="ESU_OUTPUT_SEQ_ID" remarks="сиквенс для таблицы ESU_OUTPUT"/>
        <rollback>
            <dropSequence sequenceName="ESU_OUTPUT_SEQ_ID"/>
        </rollback>
    </changeSet>

    <changeSet id="EMIASUPK-7645-5" author="sorlov" labels="1.0.0.0">
        <preConditions onFail="MARK_RAN">
                <tableExists tableName="ESU_OUTPUT"/>
        </preConditions>
        <comment>Удаление ограничения NOT NULL поля SENT_TIME</comment>
        <dropNotNullConstraint tableName="ESU_OUTPUT" columnName="SENT_TIME" />
    </changeSet>

    <changeSet id="EMIASUPK-7670-1" author="sorlov" labels="1.0.0.0">
        <preConditions onFail="MARK_RAN">
            <tableExists tableName="ORDER_ADDRESS_ALLOCATION"/>
        </preConditions>
        <comment>Переименование таблицы ORDER_ADDRESS_ALLOCATION</comment>
        <renameTable newTableName="ADDRESS_ALLOCATION_ORDER"
                     oldTableName="ORDER_ADDRESS_ALLOCATION" />
        <rollback>
            <renameTable newTableName="ORDER_ADDRESS_ALLOCATION"
                         oldTableName="ADDRESS_ALLOCATION_ORDER" />
        </rollback>
    </changeSet>

    <changeSet id="EMIASUPK-7670-2" author="sorlov" labels="1.0.0.0">
        <preConditions onFail="MARK_RAN">
            <columnExists tableName="ADDRESS_ALLOCATION_ORDER" columnName="MO_ID" />
        </preConditions>
        <comment>Удаление колонки MO_ID таблицы ADDRESS_ALLOCATION_ORDER</comment>
        <dropColumn tableName="ADDRESS_ALLOCATION_ORDER" columnName="MO_ID" />
    </changeSet>

    <changeSet id="EMIASUPK-7670-3" author="sorlov" labels="1.0.0.0">
        <preConditions onFail="MARK_RAN">
            <tableExists tableName="ADDRESS_ALLOCATION_ORDER" />
        </preConditions>
        <comment>Добавление колонки ARCHIVED таблицы ADDRESS_ALLOCATION_ORDER</comment>
        <addColumn tableName="ADDRESS_ALLOCATION_ORDER">
            <column name="ARCHIVED" type="NUMBER(1)" remarks="Признак архивности" defaultValue="0">
                <constraints nullable="false" />
            </column>
        </addColumn>
        <rollback>
            <dropColumn tableName="ADDRESS_ALLOCATION_ORDER" columnName="ARCHIVED" />
        </rollback>
    </changeSet>

    <changeSet id="EMIASUPK-7670-4" author="sorlov" labels="1.0.0.0">
        <preConditions onFail="MARK_RAN">
            <tableExists tableName="ADDRESS_ALLOCATION_ORDER" />
        </preConditions>
        <comment>Добавление колонки CREATE_DATE таблицы ADDRESS_ALLOCATION_ORDER</comment>
        <addColumn tableName="ADDRESS_ALLOCATION_ORDER">
            <column name="CREATE_DATE" type="TIMESTAMP(6)">
                <constraints nullable="false" />
            </column>
        </addColumn>
        <rollback>
            <dropColumn tableName="ADDRESS_ALLOCATION_ORDER" columnName="CREATE_DATE" />
        </rollback>
    </changeSet>

    <changeSet id="EMIASUPK-7670-5" author="sorlov" labels="1.0.0.0">
        <preConditions onFail="MARK_RAN">
            <tableExists tableName="ADDRESS_ALLOCATION_ORDER" />
        </preConditions>
        <comment>Добавление колонки UPDATE_DATE таблицы ADDRESS_ALLOCATION_ORDER</comment>
        <addColumn tableName="ADDRESS_ALLOCATION_ORDER">
            <column name="UPDATE_DATE" type="TIMESTAMP(6)">
                <constraints nullable="false" />
            </column>
        </addColumn>
        <rollback>
            <dropColumn tableName="ADDRESS_ALLOCATION_ORDER" columnName="UPDATE_DATE" />
        </rollback>
    </changeSet>

    <changeSet id="EMIASUPK-7670-6" author="sorlov" labels="1.0.0.0">
        <preConditions onFail="MARK_RAN">
            <not>
                <sequenceExists sequenceName="SEQ_ADDRESS_ALLOCATION_ORDER"/>
            </not>
        </preConditions>
        <comment>Создание сиквенса для таблицы ADDRESS_ALLOCATION_ORDER</comment>
        <createSequence sequenceName="SEQ_ADDRESS_ALLOCATION_ORDER"/>
        <rollback>
            <dropSequence sequenceName="SEQ_ADDRESS_ALLOCATION_ORDER"/>
        </rollback>
    </changeSet>

    <changeSet id="EMIASUPK-7578-1" author="sorlov" labels="1.0.0.0">
        <preConditions onFail="MARK_RAN">
            <tableExists tableName="ADDRESS_ALLOCATION_TO_AREA"/>
        </preConditions>
        <comment>Переименование таблицы ADDRESS_ALLOCATION_TO_AREA</comment>
        <renameTable newTableName="AREA_ADDRESS_ALLOCATION"
                     oldTableName="ADDRESS_ALLOCATION_TO_AREA" />
        <rollback>
            <renameTable newTableName="ADDRESS_ALLOCATION_TO_AREA"
                         oldTableName="AREA_ADDRESS_ALLOCATION" />
        </rollback>
    </changeSet>

    <changeSet id="EMIASUPK-7578-2" author="sorlov" labels="1.0.0.0">
        <preConditions onFail="MARK_RAN">
            <tableExists tableName="ADDRESS_ALLOCATION_TO_MO"/>
        </preConditions>
        <comment>Переименование таблицы ADDRESS_ALLOCATION_TO_MO</comment>
        <renameTable newTableName="MO_ADDRESS_ALLOCATION"
                     oldTableName="ADDRESS_ALLOCATION_TO_MO" />
        <rollback>
            <renameTable newTableName="ADDRESS_ALLOCATION_TO_MO"
                         oldTableName="MO_ADDRESS_ALLOCATION" />
        </rollback>
    </changeSet>

    <changeSet id="EMIASUPK-7578-3" author="sorlov" labels="1.0.0.0">
        <preConditions onFail="MARK_RAN">
            <columnExists tableName="AREAS" columnName="NAME" />
        </preConditions>
        <comment>Удаление колонки NAME таблицы AREAS</comment>
        <dropColumn tableName="AREAS" columnName="NAME" />
    </changeSet>

    <changeSet id="EMIASUPK-7578-4" author="sorlov" labels="1.0.0.0">
        <preConditions onFail="MARK_RAN">
            <columnExists tableName="AREAS" columnName="ACTUAL"/>
        </preConditions>
        <comment>Переименование столбца ACTUAL таблицы AREAS</comment>
        <renameColumn tableName="AREAS"
                      columnDataType="NUMBER(1)"
                      newColumnName="ARCHIVED"
                      oldColumnName="ACTUAL" />
        <rollback>
            <renameColumn tableName="AREAS"
                          columnDataType="NUMBER(1)"
                          newColumnName="ACTUAL"
                          oldColumnName="ARCHIVED" />
        </rollback>
    </changeSet>

    <changeSet id="EMIASUPK-7578-5" author="sorlov" labels="1.0.0.0">
        <preConditions onFail="MARK_RAN">
            <columnExists tableName="AREA_TYPES" columnName="ACTUAL"/>
        </preConditions>
        <comment>Переименование столбца ACTUAL таблицы AREA_TYPES</comment>
        <renameColumn tableName="AREA_TYPES"
                      columnDataType="NUMBER(1)"
                      newColumnName="ARCHIVED"
                      oldColumnName="ACTUAL" />
        <rollback>
            <renameColumn tableName="AREA_TYPES"
                          columnDataType="NUMBER(1)"
                          newColumnName="ACTUAL"
                          oldColumnName="ARCHIVED" />
        </rollback>
    </changeSet>

    <changeSet id="EMIASUPK-7578-6" author="sorlov" labels="1.0.0.0">
        <preConditions onFail="MARK_RAN">
            <tableExists tableName="AREAS" />
        </preConditions>
        <comment>Добавление колонки CREATE_DATE таблицы AREAS</comment>
        <addColumn tableName="AREAS">
            <column name="CREATE_DATE" type="TIMESTAMP(6)" defaultValue="NOW()">
                <constraints nullable="false" />
            </column>
        </addColumn>
        <rollback>
            <dropColumn tableName="AREAS" columnName="CREATE_DATE" />
        </rollback>
    </changeSet>

    <changeSet id="EMIASUPK-7578-7" author="sorlov" labels="1.0.0.0">
        <preConditions onFail="MARK_RAN">
            <tableExists tableName="AREAS" />
        </preConditions>
        <comment>Добавление колонки UPDATE_DATE таблицы AREAS</comment>
        <addColumn tableName="AREAS">
            <column name="UPDATE_DATE" type="TIMESTAMP(6)" defaultValue="NOW()">
                <constraints nullable="false" />
            </column>
        </addColumn>
        <rollback>
            <dropColumn tableName="AREAS" columnName="UPDATE_DATE" />
        </rollback>
    </changeSet>

    <changeSet id="EMIASUPK-7578-8" author="sorlov" labels="1.0.0.0">
        <preConditions onFail="MARK_RAN">
            <tableExists tableName="AREA_MEDICAL_EMPLOYEE" />
        </preConditions>
        <comment>Добавление колонки CREATE_DATE таблицы AREA_MEDICAL_EMPLOYEE</comment>
        <addColumn tableName="AREA_MEDICAL_EMPLOYEE">
            <column name="CREATE_DATE" type="TIMESTAMP(6)" defaultValue="NOW()">
                <constraints nullable="false" />
            </column>
        </addColumn>
        <rollback>
            <dropColumn tableName="AREA_MEDICAL_EMPLOYEE" columnName="CREATE_DATE" />
        </rollback>
    </changeSet>

    <changeSet id="EMIASUPK-7578-9" author="sorlov" labels="1.0.0.0">
        <preConditions onFail="MARK_RAN">
            <tableExists tableName="AREA_MEDICAL_EMPLOYEE" />
        </preConditions>
        <comment>Добавление колонки UPDATE_DATE таблицы AREA_MEDICAL_EMPLOYEE</comment>
        <addColumn tableName="AREA_MEDICAL_EMPLOYEE">
            <column name="UPDATE_DATE" type="TIMESTAMP(6)" defaultValue="NOW()">
                <constraints nullable="false" />
            </column>
        </addColumn>
        <rollback>
            <dropColumn tableName="AREA_MEDICAL_EMPLOYEE" columnName="UPDATE_DATE" />
        </rollback>
    </changeSet>

    <changeSet id="EMIASUPK-7578-10" author="sorlov" labels="1.0.0.0">
        <preConditions onFail="MARK_RAN">
            <tableExists tableName="MO_ADDRESS_ALLOCATION" />
        </preConditions>
        <comment>Добавление колонки CREATE_DATE таблицы MO_ADDRESS_ALLOCATION</comment>
        <addColumn tableName="MO_ADDRESS_ALLOCATION">
            <column name="CREATE_DATE" type="TIMESTAMP(6)" defaultValue="NOW()">
                <constraints nullable="false" />
            </column>
        </addColumn>
        <rollback>
            <dropColumn tableName="MO_ADDRESS_ALLOCATION" columnName="CREATE_DATE" />
        </rollback>
    </changeSet>

    <changeSet id="EMIASUPK-7578-11" author="sorlov" labels="1.0.0.0">
        <preConditions onFail="MARK_RAN">
            <tableExists tableName="MO_ADDRESS_ALLOCATION" />
        </preConditions>
        <comment>Добавление колонки UPDATE_DATE таблицы MO_ADDRESS_ALLOCATION</comment>
        <addColumn tableName="MO_ADDRESS_ALLOCATION">
            <column name="UPDATE_DATE" type="TIMESTAMP(6)" defaultValue="NOW()">
                <constraints nullable="false" />
            </column>
        </addColumn>
        <rollback>
            <dropColumn tableName="MO_ADDRESS_ALLOCATION" columnName="UPDATE_DATE" />
        </rollback>
    </changeSet>

    <changeSet id="EMIASUPK-7578-12" author="sorlov" labels="1.0.0.0">
        <preConditions onFail="MARK_RAN">
            <columnExists tableName="MO_ADDRESS_ALLOCATION" columnName="ADDRESS_FORMING_ELEMENT_ID" />
        </preConditions>
        <comment>Удаление колонки ADDRESS_FORMING_ELEMENT_ID таблицы MO_ADDRESS_ALLOCATION</comment>
        <dropColumn tableName="MO_ADDRESS_ALLOCATION" columnName="ADDRESS_FORMING_ELEMENT_ID" />
    </changeSet>

    <changeSet id="EMIASUPK-7578-13" author="sorlov" labels="1.0.0.0">
        <preConditions onFail="MARK_RAN">
            <columnExists tableName="MO_ADDRESS_ALLOCATION" columnName="REGISTRY_BUILDING_ID" />
        </preConditions>
        <comment>Удаление колонки REGISTRY_BUILDING_ID таблицы MO_ADDRESS_ALLOCATION</comment>
        <dropColumn tableName="MO_ADDRESS_ALLOCATION" columnName="REGISTRY_BUILDING_ID" />
    </changeSet>

    <changeSet id="EMIASUPK-7578-14" author="sorlov" labels="1.0.0.0">
        <preConditions onFail="MARK_RAN">
            <not>
                <columnExists tableName="MO_ADDRESS_ALLOCATION" columnName="ADDRESS_ID"/>
            </not>
        </preConditions>
        <comment>Добавление колонки ADDRESS_ID таблицы MO_ADDRESS_ALLOCATION</comment>
        <addColumn tableName="MO_ADDRESS_ALLOCATION">
            <column name="ADDRESS_ID" type="NUMBER(20)" />
        </addColumn>
        <rollback>
            <dropColumn tableName="MO_ADDRESS_ALLOCATION" columnName="ADDRESS_ID" />
        </rollback>
    </changeSet>

    <changeSet id="EMIASUPK-7578-15" author="sorlov" labels="1.0.0.0">
        <preConditions onFail="MARK_RAN">
            <not>
                <columnExists tableName="AREA_ADDRESS_ALLOCATION" columnName="ADDRESS_ID"/>
            </not>
        </preConditions>
        <comment>Добавление колонки ADDRESS_ID таблицы AREA_ADDRESS_ALLOCATION</comment>
        <addColumn tableName="AREA_ADDRESS_ALLOCATION">
            <column name="ADDRESS_ID" type="NUMBER(20)" />
        </addColumn>
        <rollback>
            <dropColumn tableName="AREA_ADDRESS_ALLOCATION" columnName="ADDRESS_ID" />
        </rollback>
    </changeSet>

    <changeSet id="EMIASUPK-7578-16" author="sorlov" labels="1.0.0.0">
        <preConditions onFail="MARK_RAN">
            <columnExists tableName="AREA_MEDICAL_EMPLOYEE" columnName="MEDICAL_EMPLOYEE_ID" />
        </preConditions>
        <comment>Удаление колонки MEDICAL_EMPLOYEE_ID таблицы AREA_MEDICAL_EMPLOYEE</comment>
        <dropColumn tableName="AREA_MEDICAL_EMPLOYEE" columnName="MEDICAL_EMPLOYEE_ID" />
    </changeSet>

    <changeSet id="EMIASUPK-7578-17" author="sorlov" labels="1.0.0.0">
        <preConditions onFail="MARK_RAN">
            <not>
                <columnExists tableName="AREA_MEDICAL_EMPLOYEE" columnName="SNILS"/>
            </not>
        </preConditions>
        <comment>Добавление колонки SNILS таблицы AREA_MEDICAL_EMPLOYEE</comment>
        <addColumn tableName="AREA_MEDICAL_EMPLOYEE">
            <column name="SNILS" type="VARCHAR2(50)" />
        </addColumn>
        <rollback>
            <dropColumn tableName="AREA_MEDICAL_EMPLOYEE" columnName="SNILS" />
        </rollback>
    </changeSet>

    <changeSet id="EMIASUPK-7578-18" author="sorlov" labels="1.0.0.0">
        <preConditions onFail="MARK_RAN">
            <not>
                <columnExists tableName="AREA_MEDICAL_EMPLOYEE" columnName="POSITION_NOM_ID"/>
            </not>
        </preConditions>
        <comment>Добавление колонки POSITION_NOM_ID таблицы AREA_MEDICAL_EMPLOYEE</comment>
        <addColumn tableName="AREA_MEDICAL_EMPLOYEE">
            <column name="POSITION_NOM_ID" type="NUMBER(20)" />
        </addColumn>
        <rollback>
            <dropColumn tableName="AREA_MEDICAL_EMPLOYEE" columnName="POSITION_NOM_ID" />
        </rollback>
    </changeSet>

    <changeSet id="EMIASUPK-7578-18-1" author="sorlov" labels="1.0.0.0">
        <preConditions onFail="MARK_RAN">
            <not>
                <indexExists indexName="IXFK_AREA_MEDICAL_EMPLOYEE_POS_NOM"/>
            </not>
        </preConditions>
        <comment>Создание индекса колонки POSITION_NOM_ID таблицы AREA_MEDICAL_EMPLOYEE</comment>
        <createIndex indexName="IXFK_AREA_MEDICAL_EMPLOYEE_POS_NOM"
                     tableName="AREA_MEDICAL_EMPLOYEE"
                     unique="false">
            <column name="POSITION_NOM_ID" type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="EMIASUPK-7578-18-2" author="sorlov" labels="1.0.0.0">
        <preConditions onFail="MARK_RAN">
            <columnExists tableName="AREA_MEDICAL_EMPLOYEE" columnName="POSITION_NOM_ID" />
            <columnExists tableName="POSITION_NOM" columnName="ID" />
        </preConditions>
        <comment>Создание внешнего ключа FK_AREA_MEDICAL_EMPLOYEE_POS_NOM</comment>
        <addForeignKeyConstraint baseColumnNames="POSITION_NOM_ID"
                                 baseTableName="AREA_MEDICAL_EMPLOYEE"
                                 constraintName="FK_AREA_MEDICAL_EMPLOYEE_POS_NOM"
                                 referencedColumnNames="ID"
                                 referencedTableName="POSITION_NOM"/>
    </changeSet>

    <changeSet id="EMIASUPK-7578-19" author="sorlov" labels="1.0.0.0">
        <preConditions onFail="MARK_RAN">
            <not>
                <tableExists tableName="ADDRESS_FORMING_ELEMENT"/>
            </not>
        </preConditions>
        <comment>Создание таблицы ADDRESS</comment>
        <createTable tableName="ADDRESS"
                     remarks="Адрес">
            <column name="ID" type="NUMBER(20)">
                <constraints primaryKey="true" nullable="false" />
            </column>
            <column name="TYPE_ADDRESS" type="VARCHAR2(50)">
                <constraints nullable="false" />
            </column>
            <column name="GLOBAL_ID" type="NUMBER(20)">
                <constraints nullable="false" />
            </column>
        </createTable>
        <rollback>
            <dropTable tableName="ADDRESS"/>
        </rollback>
    </changeSet>

    <changeSet id="EMIASUPK-7578-20" author="sorlov" labels="1.0.0.0">
        <preConditions onFail="MARK_RAN">
            <columnExists tableName="ADDRESS_FORMING_ELEMENT" columnName="TYPE"/>
            <columnExists tableName="ADDRESS_FORMING_ELEMENT" columnName="NAME"/>
        </preConditions>
        <comment>Удаление таблицы ADDRESS_FORMING_ELEMENT</comment>
        <dropTable tableName="ADDRESS_FORMING_ELEMENT" />
    </changeSet>

    <changeSet id="EMIASUPK-7578-21" author="sorlov" labels="1.0.0.0">
        <preConditions onFail="MARK_RAN">
            <not>
                <tableExists tableName="ADDRESS_FORMING_ELEMENT"/>
            </not>
        </preConditions>
        <comment>Создание таблицы ADDRESS_FORMING_ELEMENT</comment>
        <createTable tableName="ADDRESS_FORMING_ELEMENT"
                     remarks="Адресообразующий элемент">
            <column name="GLOBAL_ID" type="NUMBER(20)" remarks="Уникальный идентификатор объекта">
                <constraints primaryKey="true" nullable="false" />
            </column>
            <column name="REGION_TE_CODE" type="VARCHAR2(4)" remarks="Код округа ОМК ТЕ"/>
            <column name="AREACODE_OMK_TE" type="VARCHAR2(4000)" remarks="Код района ОМК ТЕ"/>
            <column name="AREACODE" type="VARCHAR2(3)" remarks="Код района"/>
            <column name="CITYCODE" type="VARCHAR2(3)" remarks="Код города"/>
            <column name="PLACECODE" type="VARCHAR2(3)" remarks="Код населенного пункта"/>
            <column name="PLANCODE" type="VARCHAR2(4)" remarks="Код элемента планировочной структуры"/>
            <column name="STREETCODE" type="VARCHAR2(4)" remarks="Код улицы"/>
            <column name="AOLEVEL" type="VARCHAR2(2)" remarks="Уровень адресного объекта"/>
            <column name="ADDRESS" type="VARCHAR2(4000)" remarks="Полное наименование адресообразующего элемента">
                <constraints nullable="false" />
            </column>
            <column name="REGION_TE_NAME" type="VARCHAR2(4000)" remarks="Официальное наименование округа"/>
            <column name="AREA_TE_NAME" type="VARCHAR2(4000)" remarks="Официальное наименование муниципального образования"/>
            <column name="AREA_NAME" type="VARCHAR2(4000)" remarks="Официальное наименование района"/>
            <column name="CITY_NAME" type="VARCHAR2(4000)" remarks="Официальное наименование города"/>
            <column name="PLACE_NAME" type="VARCHAR2(4000)" remarks="Официальное наименование населѐнного пункта"/>
            <column name="PLAN_NAME" type="VARCHAR2(4000)" remarks="Официальное наименование элемента планировочной структуры"/>
            <column name="STREET_NAME" type="VARCHAR2(4000)" remarks="Официальное наименование улицы"/>
            <column name="STREET_OMK_UM" type="VARCHAR2(10)" remarks="Код ОМК УМ улицы"/>
            <column name="STREET_ID" type="NUMBER(20)" remarks="global_id ЕМИАС.НСИ улицы"/>
        </createTable>
        <rollback>
            <dropTable tableName="ADDRESS_FORMING_ELEMENT"/>
        </rollback>
    </changeSet>

    <changeSet id="EMIASUPK-7578-22" author="sorlov" labels="1.0.0.0">
        <preConditions onFail="MARK_RAN">
            <columnExists tableName="REGISTRY_BUILDING" columnName="ADDRESS_ELEMENT"/>
        </preConditions>
        <comment>Удаление таблицы REGISTRY_BUILDING</comment>
        <dropTable tableName="REGISTRY_BUILDING" />
    </changeSet>

    <changeSet id="EMIASUPK-7578-23" author="sorlov" labels="1.0.0.0">
        <preConditions onFail="MARK_RAN">
            <not>
                <tableExists tableName="REGISTRY_BUILDING"/>
            </not>
        </preConditions>
        <comment>Создание таблицы REGISTRY_BUILDING</comment>
        <createTable tableName="REGISTRY_BUILDING"
                     remarks="Сведения по отдельным зданиям, сооружениям">
            <column name="GLOBAL_ID" type="NUMBER(20)" remarks="Уникальный идентификатор объекта">
                <constraints primaryKey="true" nullable="false" />
            </column>
            <column name="ADDR_ID" type="NUMBER(20)" remarks="Уникальный идентификатор объекта реестра адресообразующих элементов">
                <constraints nullable="false" />
            </column>
            <column name="REGION_TE_CODE" type="VARCHAR2(32)" remarks="Код округа ОМК ТЕ"/>
            <column name="AREACODE_OMK_TE" type="VARCHAR2(32)" remarks="Код района ОМК ТЕ"/>
            <column name="AREACODE" type="VARCHAR2(3)" remarks="Код района"/>
            <column name="CITYCODE" type="VARCHAR2(3)" remarks="Код города"/>
            <column name="PLACECODE" type="VARCHAR2(3)" remarks="Код населенного пункта"/>
            <column name="PLANCODE" type="VARCHAR2(4)" remarks="Код элемента планировочной структуры"/>
            <column name="STREETCODE" type="VARCHAR2(4)" remarks="Код улицы"/>
            <column name="L1_TYPE" type="VARCHAR2(256)" remarks="Тип номера дома, владения"/>
            <column name="L1_VALUE" type="VARCHAR2(256)" remarks="Номер дома, владения"/>
            <column name="L2_TYPE" type="VARCHAR2(256)" remarks="Тип номера корпуса"/>
            <column name="L2_VALUE" type="VARCHAR2(256)" remarks="Номер корпуса"/>
            <column name="L3_TYPE" type="VARCHAR2(256)" remarks="Тип номера строения, сооружения"/>
            <column name="L3_VALUE" type="VARCHAR2(256)" remarks="Номер строения, сооружения"/>
            <column name="ADDRESS" type="VARCHAR2(4000)" remarks="Адрес">
                <constraints nullable="false" />
            </column>
        </createTable>
        <rollback>
            <dropTable tableName="ADDRESS_FORMING_ELEMENT"/>
        </rollback>
    </changeSet>

    <changeSet id="EMIASUPK-7578-26" author="sorlov" labels="1.0.0.0">
        <preConditions onFail="MARK_RAN">
            <not>
                <indexExists indexName="IDX_REGISTRY_BUILDING_ADDR_ID"/>
            </not>
        </preConditions>
        <comment>Создание индекса колонки ADDR_ID таблицы REGISTRY_BUILDING</comment>
        <createIndex indexName="IDX_REGISTRY_BUILDING_ADDR_ID"
                     tableName="REGISTRY_BUILDING"
                     unique="false">
            <column name="ADDR_ID" type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="EMIASUPK-7578-27-1" author="sorlov" labels="1.0.0.0">
        <preConditions onFail="MARK_RAN">
            <tableExists tableName="AREA_ADDRESS_ALLOCATION" />
        </preConditions>
        <comment>Добавление колонки ADDRESS_FORMING_ELEMENT_ID таблицы AREA_ADDRESS_ALLOCATION</comment>
        <addColumn tableName="AREA_ADDRESS_ALLOCATION">
            <column name="ADDRESS_FORMING_ELEMENT_ID" type="NUMBER(20)" />
        </addColumn>
        <rollback>
            <dropColumn tableName="AREA_ADDRESS_ALLOCATION" columnName="ADDRESS_FORMING_ELEMENT_ID" />
        </rollback>
    </changeSet>

    <changeSet id="EMIASUPK-7578-27-2" author="sorlov" labels="1.0.0.0">
        <preConditions onFail="MARK_RAN">
            <tableExists tableName="AREA_ADDRESS_ALLOCATION" />
        </preConditions>
        <comment>Добавление колонки REGISTRY_BUILDING_ID таблицы AREA_ADDRESS_ALLOCATION</comment>
        <addColumn tableName="AREA_ADDRESS_ALLOCATION">
            <column name="REGISTRY_BUILDING_ID" type="NUMBER(20)">
                <constraints nullable="false" />
            </column>
        </addColumn>
        <rollback>
            <dropColumn tableName="AREA_ADDRESS_ALLOCATION" columnName="REGISTRY_BUILDING_ID" />
        </rollback>
    </changeSet>

    <changeSet id="EMIASUPK-7578-27-3" author="sorlov" labels="1.0.0.0">
        <preConditions onFail="MARK_RAN">
            <not>
                <indexExists indexName="IDX_AREA_ADDRESS_AL_A_F_E_ID"/>
            </not>
        </preConditions>
        <comment>Создание индекса колонки ADDRESS_FORMING_ELEMENT_ID таблицы AREA_ADDRESS_ALLOCATION</comment>
        <createIndex indexName="IDX_AREA_ADDRESS_AL_A_F_E_ID"
                     tableName="AREA_ADDRESS_ALLOCATION"
                     unique="false">
            <column name="ADDRESS_FORMING_ELEMENT_ID" type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="EMIASUPK-7578-27-4" author="sorlov" labels="1.0.0.0">
        <preConditions onFail="MARK_RAN">
            <not>
                <indexExists indexName="IDX_AREA_ADDRESS_AL_REG_B_ID"/>
            </not>
        </preConditions>
        <comment>Создание индекса колонки REGISTRY_BUILDING_ID таблицы AREA_ADDRESS_ALLOCATION</comment>
        <createIndex indexName="IDX_AREA_ADDRESS_AL_REG_B_ID"
                     tableName="AREA_ADDRESS_ALLOCATION"
                     unique="false">
            <column name="REGISTRY_BUILDING_ID" type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="EMIASUPK-7578-27-5" author="sorlov" labels="1.0.0.0">
        <preConditions onFail="MARK_RAN">
            <columnExists tableName="AREA_ADDRESS_ALLOCATION" columnName="ADDRESS_FORMING_ELEMENT_ID" />
            <columnExists tableName="ADDRESS_FORMING_ELEMENT" columnName="GLOBAL_ID" />
        </preConditions>
        <comment>Создание внешнего ключа FK_AREA_ADDRESS_ALLOC_A_F_E_ID</comment>
        <addForeignKeyConstraint baseColumnNames="ADDRESS_FORMING_ELEMENT_ID"
                                 baseTableName="AREA_ADDRESS_ALLOCATION"
                                 constraintName="FK_AREA_ADDRESS_ALLOC_A_F_E_ID"
                                 referencedColumnNames="GLOBAL_ID"
                                 referencedTableName="ADDRESS_FORMING_ELEMENT"/>
    </changeSet>

    <changeSet id="EMIASUPK-7578-27-6" author="sorlov" labels="1.0.0.0">
        <preConditions onFail="MARK_RAN">
            <columnExists tableName="AREA_ADDRESS_ALLOCATION" columnName="REGISTRY_BUILDING_ID" />
            <columnExists tableName="REGISTRY_BUILDING" columnName="GLOBAL_ID" />
        </preConditions>
        <comment>Создание внешнего ключа FK_AREA_ADDRESS_ALLOC_REG_B_ID</comment>
        <addForeignKeyConstraint baseColumnNames="REGISTRY_BUILDING_ID"
                                 baseTableName="AREA_ADDRESS_ALLOCATION"
                                 constraintName="FK_AREA_ADDRESS_ALLOC_REG_B_ID"
                                 referencedColumnNames="GLOBAL_ID"
                                 referencedTableName="REGISTRY_BUILDING"/>
    </changeSet>

</databaseChangeLog>
