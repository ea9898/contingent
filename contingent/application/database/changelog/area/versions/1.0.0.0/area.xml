<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog
        xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.6.xsd">


    <!-- ADDRESSES -->
    <changeSet id="CONTINGENT2-AREA-1" author="sorlov" labels="1.0.0.0">
        <preConditions onFail="MARK_RAN">
            <not>
                <tableExists tableName="ADDRESSES"/>
            </not>
        </preConditions>
        <comment>Создание таблицы ADDRESSES</comment>
        <createTable tableName="ADDRESSES"
                     remarks="Адрес">
            <column name="ID" type="BIGINT">
                <constraints primaryKey="true" nullable="false" />
            </column>
            <column name="LEVEL" type="SMALLINT">
                <constraints nullable="false" />
            </column>
            <column name="AFE_ID" type="BIGINT" />
            <column name="CREATE_DATE" type="TIMESTAMP(6)" remarks="Время создания" />
            <column name="BR_ID" type="BIGINT" />
        </createTable>
        <rollback>
            <dropTable tableName="ADDRESSES"/>
        </rollback>
    </changeSet>

    <changeSet id="CONTINGENT2-AREA-1-2" author="sorlov" labels="1.0.0.0">
        <preConditions onFail="MARK_RAN">
            <not>
                <indexExists indexName="IXFK_ADDRESSES_AFE_ID"/>
            </not>
        </preConditions>
        <comment>Создание индекса колонки AFE_ID таблицы ADDRESSES</comment>
        <createIndex indexName="IXFK_ADDRESSES_AFE_ID"
                     tableName="ADDRESSES"
                     unique="false">
            <column name="AFE_ID" type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="CONTINGENT2-AREA-1-3" author="sorlov" labels="1.0.0.0">
        <preConditions onFail="MARK_RAN">
            <not>
                <indexExists indexName="IXFK_ADDRESSES_REGISTRY_B_ID"/>
            </not>
        </preConditions>
        <comment>Создание индекса колонки BR_ID таблицы ADDRESSES</comment>
        <createIndex indexName="IXFK_ADDRESSES_REGISTRY_B_ID"
                     tableName="ADDRESSES"
                     unique="false">
            <column name="BR_ID" type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="CONTINGENT2-AREA-1-6" author="sorlov">
        <preConditions onFail="MARK_RAN">
            <not>
                <sequenceExists sequenceName="SEQ_ADDRESSES"/>
            </not>
        </preConditions>
        <comment>Создание сиквенса для таблицы ADDRESSES</comment>
        <createSequence sequenceName="SEQ_ADDRESSES"/>
        <rollback>
            <dropSequence sequenceName="SEQ_ADDRESSES"/>
        </rollback>
    </changeSet>

    <!-- !!!! ADDRESSES !!!! -->

    <!-- AREAS -->
    <changeSet id="CONTINGENT2-AREA-4" author="sorlov" labels="1.0.0.0">
        <preConditions onFail="MARK_RAN">
            <not>
                <tableExists tableName="AREAS"/>
            </not>
        </preConditions>
        <comment>Создание таблицы AREAS</comment>
        <createTable tableName="AREAS"
                     remarks="Участок">
            <column name="ID" type="BIGINT">
                <constraints primaryKey="true" nullable="false" />
            </column>
            <column name="MO_ID" type="BIGINT" remarks="ИД МО">
                <constraints nullable="false" />
            </column>
            <column name="MU_ID" type="BIGINT" remarks="ИД МУ" />
            <column name="AREA_TYPE_CODE" type="BIGINT" remarks="Тип участка. Код" />
            <column name="NUMBER" type="NUMBER(5)" remarks="Номер" />
            <column name="IS_AUTO_ASSIGN_FOR_ATTACH" type="NUMBER(1)" remarks="Для автоприкрепления" />
            <column name="DESCRIPTION" type="VARCHAR2(370)" />
            <column name="ATTACH_BY_MEDICAL_REASON" type="NUMBER(1)" />
            <column name="AGE_MIN" type="NUMBER(8)" remarks="Возраст мин" />
            <column name="AGE_MAX" type="NUMBER(8)" remarks="Возраст макс" />
            <column name="AGE_M_MIN" type="NUMBER(8)" remarks="Возраст М мин" />
            <column name="AGE_M_MAX" type="NUMBER(8)" remarks="Возраст М макс" />
            <column name="AGE_W_MIN" type="NUMBER(8)" remarks="Возраст Ж мин" />
            <column name="AGE_W_MAX" type="NUMBER(8)" remarks="Возраст Ж макс" />
            <column name="CREATE_DATE" type="TIMESTAMP(6)">
                <constraints nullable="false" />
            </column>
            <column name="UPDATE_DATE" type="TIMESTAMP(6)" />
            <column name="ARCHIVED" type="NUMBER(1)" remarks="Признак архивности" defaultValue="0">
                <constraints nullable="false" />
            </column>
        </createTable>
        <rollback>
            <dropTable tableName="AREAS"/>
        </rollback>
    </changeSet>

    <changeSet id="CONTINGENT2-AREA-4-1" author="sorlov" labels="1.0.0.0">
        <preConditions onFail="MARK_RAN">
            <not>
                <indexExists indexName="IXFK_AREA_AREA_TYPE"/>
            </not>
        </preConditions>
        <comment>Создание индекса колонки AREA_TYPE_CODE таблицы AREAS</comment>
        <createIndex indexName="IXFK_AREA_AREA_TYPE"
                     tableName="AREAS"
                     unique="false">
            <column name="AREA_TYPE_CODE" type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="CONTINGENT2-AREA-4-2" author="sorlov" labels="1.0.0.0">
        <preConditions onFail="MARK_RAN">
            <columnExists tableName="AREAS" columnName="AREA_TYPE_CODE" />
            <columnExists tableName="AREA_TYPE" columnName="CODE" />
        </preConditions>
        <comment>Создание внешнего ключа FK_AREA_AREA_TYPE01</comment>
        <addForeignKeyConstraint baseColumnNames="AREA_TYPE_CODE"
                                 baseTableName="AREAS"
                                 constraintName="FK_AREA_AREA_TYPE01"
                                 referencedColumnNames="CODE"
                                 referencedTableName="AREA_TYPE"/>
    </changeSet>

    <changeSet id="CONTINGENT2-AREA-4-3" author="sorlov" labels="1.0.0.0">
        <preConditions onFail="MARK_RAN">
            <not>
                <indexExists indexName="IX_AREAS_MU_ID"/>
            </not>
        </preConditions>
        <comment>Создание индекса колонки MU_ID таблицы AREAS</comment>
        <createIndex indexName="IX_AREAS_MU_ID"
                     tableName="AREAS"
                     unique="false">
            <column name="MU_ID" type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="CONTINGENT2-AREA-4-4" author="sorlov">
        <preConditions onFail="MARK_RAN">
            <not>
                <sequenceExists sequenceName="SEQ_AREAS"/>
            </not>
        </preConditions>
        <comment>Создание сиквенса для таблицы AREAS</comment>
        <createSequence sequenceName="SEQ_AREAS"/>
        <rollback>
            <dropSequence sequenceName="SEQ_AREAS"/>
        </rollback>
    </changeSet>

    <changeSet author="ddryuchin" id="CONTINGENT2-AREA-4-5" labels="1.0.0.0">
        <sql>
            ALTER SEQUENCE SEQ_AREAS RESTART WITH 100000000;
        </sql>
    </changeSet>

    <changeSet author="ddryuchin" id="CONTINGENT2-AREA-4-6">
        <modifyDataType columnName="AGE_MIN"
                        newDataType="SMALLINT"
                        tableName="AREAS"/>
        <modifyDataType columnName="AGE_MAX"
                        newDataType="SMALLINT"
                        tableName="AREAS"/>
        <modifyDataType columnName="AGE_M_MIN"
                        newDataType="SMALLINT"
                        tableName="AREAS"/>
        <modifyDataType columnName="AGE_M_MAX"
                        newDataType="SMALLINT"
                        tableName="AREAS"/>
        <modifyDataType columnName="AGE_W_MIN"
                        newDataType="SMALLINT"
                        tableName="AREAS"/>
        <modifyDataType columnName="AGE_W_MAX"
                        newDataType="SMALLINT"
                        tableName="AREAS"/>
    </changeSet>
    <!-- !!!! AREAS !!!! -->

    <!-- AREA_MEDICAL_EMPLOYEE -->
    <changeSet id="CONTINGENT2-AREA-2" author="sorlov" labels="1.0.0.0">
        <preConditions onFail="MARK_RAN">
            <not>
                <tableExists tableName="AREA_MEDICAL_EMPLOYEE"/>
            </not>
        </preConditions>
        <comment>Создание таблицы AREA_MEDICAL_EMPLOYEE</comment>
        <createTable tableName="AREA_MEDICAL_EMPLOYEE"
                     remarks="МР на участке">
            <column name="ID" type="BIGINT">
                <constraints primaryKey="true" nullable="false" />
            </column>
            <column name="MEDICAL_EMPLOYEE_JOB_ID" type="BIGINT" remarks="ИД Исполнения должности" />
            <column name="AREA_ID" type="BIGINT" />
            <column name="IS_REPLACEMENT" type="NUMBER(1)" remarks="Роль МУ на участке (тип обслуживнаия)" />
            <column name="OUZ" type="VARCHAR2(50)" />
            <column name="START_DATE" type="TIMESTAMP(6)" remarks="Дата начала работы на участке" />
            <column name="END_DATE" type="TIMESTAMP(6)" remarks="Дата окончания работы на участке" />
            <column name="SNILS" type="VARCHAR2(20)" />
            <column name="POSITION_CODE" type="BIGINT" />
            <column name="SUBDIVISION_ID" type="BIGINT" />
            <column name="CREATE_DATE" type="TIMESTAMP(6)">
                <constraints nullable="false" />
            </column>
            <column name="UPDATE_DATE" type="TIMESTAMP(6)" />
        </createTable>
        <rollback>
            <dropTable tableName="AREA_MEDICAL_EMPLOYEE"/>
        </rollback>
    </changeSet>

    <changeSet id="CONTINGENT2-AREA-2-1" author="sorlov" labels="1.0.0.0">
        <preConditions onFail="MARK_RAN">
            <not>
                <indexExists indexName="IXFK_AME_AREA"/>
            </not>
        </preConditions>
        <comment>Создание индекса колонки AREA_ID таблицы AREA_MEDICAL_EMPLOYEE</comment>
        <createIndex indexName="IXFK_AREA_MEDICAL_EMPLOYEE_AREA"
                     tableName="AREA_MEDICAL_EMPLOYEE"
                     unique="false">
            <column name="AREA_ID" type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="CONTINGENT2-AREA-2-2" author="sorlov" labels="1.0.0.0">
        <preConditions onFail="MARK_RAN">
            <not>
                <indexExists indexName="IXFK_AME_POSITION_NOM_CLINIC"/>
            </not>
        </preConditions>
        <comment>Создание индекса колонки POSITION_CODE таблицы AREA_MEDICAL_EMPLOYEE</comment>
        <createIndex indexName="IXFK_AME_POSITION_NOM_CLINIC"
                     tableName="AREA_MEDICAL_EMPLOYEE"
                     unique="false">
            <column name="POSITION_CODE" type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="CONTINGENT2-AREA-2-3" author="sorlov" labels="1.0.0.0">
        <preConditions onFail="MARK_RAN">
            <columnExists tableName="AREA_MEDICAL_EMPLOYEE" columnName="AREA_ID" />
            <columnExists tableName="AREAS" columnName="ID" />
        </preConditions>
        <comment>Создание внешнего ключа FK_AME_AREA</comment>
        <addForeignKeyConstraint baseColumnNames="AREA_ID"
                                 baseTableName="AREA_MEDICAL_EMPLOYEE"
                                 constraintName="FK_AME_AREA"
                                 referencedColumnNames="ID"
                                 referencedTableName="AREAS"/>
    </changeSet>

    <changeSet id="CONTINGENT2-AREA-2-5" author="shnaider_ab">
        <preConditions onFail="MARK_RAN">
            <not>
                <sequenceExists sequenceName="SEQ_AREA_MEDICAL_EMPLOYEE"/>
            </not>
        </preConditions>
        <comment>Создание сиквенса для таблицы AREA_MEDICAL_EMPLOYEE</comment>
        <createSequence sequenceName="SEQ_AREA_MEDICAL_EMPLOYEE"/>
        <rollback>
            <dropSequence sequenceName="SEQ_AREA_MEDICAL_EMPLOYEE"/>
        </rollback>
    </changeSet>

    <changeSet id="CONTINGENT2-AREA-2-6" author="ddryuchin" labels="1.0.0.0">
        <preConditions onFail="MARK_RAN">
            <not>
                <tableExists tableName="AREA_MEDICAL_EMPLOYEES"/>
            </not>
        </preConditions>
        <comment>Переименование таблицы AREA_MEDICAL_EMPLOYEE</comment>
        <renameTable newTableName="AREA_MEDICAL_EMPLOYEES"
                     oldTableName="AREA_MEDICAL_EMPLOYEE"/>
        <rollback>
            <renameTable newTableName="AREA_MEDICAL_EMPLOYEE"
                         oldTableName="AREA_MEDICAL_EMPLOYEES"/>
        </rollback>
    </changeSet>

    <changeSet id="CONTINGENT2-AREA-2-7" author="ddryuchin" labels="1.0.0.0">
        <dropColumn columnName="OUZ"
                    tableName="AREA_MEDICAL_EMPLOYEES"/>
    </changeSet>

    <changeSet id="CONTINGENT2-AREA-2-8" author="sorlov" labels="1.0.0.0">
        <preConditions onFail="MARK_RAN">
            <not>
                <indexExists indexName="IXFK_AME_MEJI"/>
            </not>
        </preConditions>
        <comment>Создание индекса колонки MEDICAL_EMPLOYEE_JOB_ID таблицы AREA_MEDICAL_EMPLOYEES</comment>
        <createIndex indexName="IXFK_AME_MEJI"
                     tableName="AREA_MEDICAL_EMPLOYEES"
                     unique="false">
            <column name="MEDICAL_EMPLOYEE_JOB_ID" type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="CONTINGENT2-206-2-1" author="mkachalov" labels="1.0.0.0">
        <preConditions onFail="MARK_RAN">
            <foreignKeyConstraintExists foreignKeyName="fk_ame_position_nom"/>
        </preConditions>
        <dropForeignKeyConstraint baseTableName="AREA_MEDICAL_EMPLOYEES" constraintName="fk_ame_position_nom"/>
    </changeSet>

    <changeSet id="CONTINGENT2-206-2-2" author="mkachalov" labels="1.0.0.0">
        <preConditions onFail="MARK_RAN">
            <tableExists tableName="AREA_MEDICAL_EMPLOYEES"/>
        </preConditions>
        <comment>Изменение типа данных в таблице AREA_MEDICAL_EMPLOYEES</comment>
        <modifyDataType tableName="AREA_MEDICAL_EMPLOYEES" columnName="POSITION_CODE" newDataType="VARCHAR2(100)"/>
    </changeSet>


    <!-- !!!! AREA_MEDICAL_EMPLOYEE !!!! -->

    <!-- ADDRESS_ALLOCATION_ORDERS -->
    <changeSet id="CONTINGENT2-AREA-3" author="sorlov" labels="1.0.0.0">
        <preConditions onFail="MARK_RAN">
            <not>
                <tableExists tableName="ADDRESS_ALLOCATION_ORDERS"/>
            </not>
        </preConditions>
        <comment>Создание таблицы ADDRESS_ALLOCATION_ORDERS</comment>
        <createTable tableName="ADDRESS_ALLOCATION_ORDERS"
                     remarks="Распоряжение о распределении территории">
            <column name="ID" type="BIGINT" remarks="ИД распоряжения">
                <constraints primaryKey="true" nullable="false" />
            </column>
            <column name="NUMBER" type="VARCHAR2(255)" remarks="Номер">
                <constraints nullable="false" />
            </column>
            <column name="NAME" type="VARCHAR2(255)" remarks="Наименование" />
            <column name="DATE" type="TIMESTAMP(6)" remarks="Дата распоряжения" />
            <column name="OUZ" type="VARCHAR2(300)" remarks="Орган выпустивший распоряжение" />
            <column name="CREATE_DATE" type="TIMESTAMP(6)">
                <constraints nullable="false" />
            </column>
            <column name="UPDATE_DATE" type="TIMESTAMP(6)" />
            <column name="ARCHIVED" type="NUMBER(1)" remarks="Признак архивности" defaultValue="0">
                <constraints nullable="false" />
            </column>
        </createTable>
        <rollback>
            <dropTable tableName="ADDRESS_ALLOCATION_ORDERS"/>
        </rollback>
    </changeSet>

    <changeSet id="CONTINGENT2-AREA-3-1" author="sorlov" labels="1.0.0.0">
        <preConditions onFail="MARK_RAN">
            <not>
                <sequenceExists sequenceName="SEQ_ADDRESS_ALLOCATION_ORDERS"/>
            </not>
        </preConditions>
        <comment>Создание сиквенса для таблицы ADDRESS_ALLOCATION_ORDERS</comment>
        <createSequence sequenceName="SEQ_ADDRESS_ALLOCATION_ORDERS"/>
        <rollback>
            <dropSequence sequenceName="SEQ_ADDRESS_ALLOCATION_ORDERS"/>
        </rollback>
    </changeSet>
    <!-- !!!! ADDRESS_ALLOCATION_ORDERS !!!! -->

    <!-- AREA_TO_AREA_TYPE -->
    <changeSet id="CONTINGENT2-AREA-5" author="sorlov" labels="1.0.0.0">
        <preConditions onFail="MARK_RAN">
            <not>
                <tableExists tableName="AREA_TO_AREA_TYPE"/>
            </not>
        </preConditions>
        <comment>Создание таблицы AREA_TO_AREA_TYPE</comment>
        <createTable tableName="AREA_TO_AREA_TYPE"
                     remarks="МР на участке">
            <column name="ID" type="BIGINT">
                <constraints primaryKey="true" nullable="false" />
            </column>
            <column name="AREA_ID" type="BIGINT">
                <constraints nullable="false" />
            </column>
            <column name="AREA_TYPE_CODE" type="BIGINT" remarks="Тип участка. Код">
                <constraints nullable="false" />
            </column>
        </createTable>
        <rollback>
            <dropTable tableName="AREA_TO_AREA_TYPE"/>
        </rollback>
    </changeSet>

    <changeSet id="CONTINGENT2-AREA-5-1" author="sorlov" labels="1.0.0.0">
        <preConditions onFail="MARK_RAN">
            <not>
                <indexExists indexName="IXFK_AREA_TO_AREA_TYPE_AREAS"/>
            </not>
        </preConditions>
        <comment>Создание индекса колонки AREA_ID таблицы AREA_TO_AREA_TYPE</comment>
        <createIndex indexName="IXFK_AREA_TO_AREA_TYPE_AREAS"
                     tableName="AREA_TO_AREA_TYPE"
                     unique="false">
            <column name="AREA_ID" type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="CONTINGENT2-AREA-5-2" author="sorlov" labels="1.0.0.0">
        <preConditions onFail="MARK_RAN">
            <columnExists tableName="AREA_TO_AREA_TYPE" columnName="AREA_ID" />
            <columnExists tableName="AREAS" columnName="ID" />
        </preConditions>
        <comment>Создание внешнего ключа FK_AREA_TO_AREA_TYPE_AREAS</comment>
        <addForeignKeyConstraint baseColumnNames="AREA_ID"
                                 baseTableName="AREA_TO_AREA_TYPE"
                                 constraintName="FK_AREA_TO_AREA_TYPE_AREAS"
                                 referencedColumnNames="ID"
                                 referencedTableName="AREAS"/>
    </changeSet>

    <changeSet id="CONTINGENT2-AREA-5-3" author="sorlov" labels="1.0.0.0">
        <preConditions onFail="MARK_RAN">
            <columnExists tableName="AREA_TO_AREA_TYPE" columnName="AREA_TYPE_CODE" />
            <columnExists tableName="AREA_TYPE" columnName="CODE" />
        </preConditions>
        <comment>Создание внешнего ключа FK_AREA_TO_AREA_AREA_TYPE_CODE</comment>
        <addForeignKeyConstraint baseColumnNames="AREA_TYPE_CODE"
                                 baseTableName="AREA_TO_AREA_TYPE"
                                 constraintName="FK_AREA_TO_AREA_AREA_TYPE_CODE"
                                 referencedColumnNames="CODE"
                                 referencedTableName="AREA_TYPE"/>
    </changeSet>

    <changeSet id="CONTINGENT2-AREA-5-4" author="sorlov" labels="1.0.0.0">
        <preConditions onFail="MARK_RAN">
            <not>
                <indexExists indexName="IXFK_AREA_TO_AREA_AR_TYPE_CODE"/>
            </not>
        </preConditions>
        <comment>Создание индекса колонки AREA_TYPE_CODE таблицы AREA_TO_AREA_TYPE</comment>
        <createIndex indexName="IXFK_AREA_TO_AREA_AR_TYPE_CODE"
                     tableName="AREA_TO_AREA_TYPE"
                     unique="false">
            <column name="AREA_TYPE_CODE" type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="CONTINGENT2-AREA-5-5" author="sorlov">
        <preConditions onFail="MARK_RAN">
            <not>
                <sequenceExists sequenceName="SEQ_AREA_TO_AREA_TYPE"/>
            </not>
        </preConditions>
        <comment>Создание сиквенса для таблицы AREA_TO_AREA_TYPE</comment>
        <createSequence sequenceName="SEQ_AREA_TO_AREA_TYPE"/>
        <rollback>
            <dropSequence sequenceName="SEQ_AREA_TO_AREA_TYPE"/>
        </rollback>
    </changeSet>
    <!-- !!!! AREA_TO_AREA_TYPE !!!! -->

    <!-- MO_ADDRESSES -->
    <changeSet id="CONTINGENT2-AREA-6" author="sorlov" labels="1.0.0.0">
        <preConditions onFail="MARK_RAN">
            <not>
                <tableExists tableName="MO_ADDRESSES"/>
            </not>
        </preConditions>
        <comment>Создание таблицы MO_ADDRESSES</comment>
        <createTable tableName="MO_ADDRESSES"
                     remarks="Распределение к МО">
            <column name="ID" type="BIGINT">
                <constraints primaryKey="true" nullable="false" />
            </column>
            <column name="MO_ID" type="BIGINT" />
            <column name="AREA_TYPE_CODE" type="BIGINT" />
            <column name="ORDER_ID" type="BIGINT" />
            <column name="REJECT_ORDER_ID" type="BIGINT" />
            <column name="ADDRESS_ID" type="BIGINT" />
            <column name="START_DATE" type="TIMESTAMP(6)" />
            <column name="END_DATE" type="TIMESTAMP(6)" />
            <column name="CREATE_DATE" type="TIMESTAMP(6)">
                <constraints nullable="false" />
            </column>
            <column name="UPDATE_DATE" type="TIMESTAMP(6)" />
        </createTable>
        <rollback>
            <dropTable tableName="MO_ADDRESSES"/>
        </rollback>
    </changeSet>

    <changeSet id="CONTINGENT2-AREA-6-1" author="sorlov" labels="1.0.0.0">
        <preConditions onFail="MARK_RAN">
            <not>
                <indexExists indexName="IXFK_MO_ADDRESSES_ORDER_ID"/>
            </not>
        </preConditions>
        <comment>Создание индекса колонки ORDER_ID таблицы MO_ADDRESSES</comment>
        <createIndex indexName="IXFK_MO_ADDRESSES_ORDER_ID"
                     tableName="MO_ADDRESSES"
                     unique="false">
            <column name="ORDER_ID" type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="CONTINGENT2-AREA-6-2" author="sorlov" labels="1.0.0.0">
        <preConditions onFail="MARK_RAN">
            <columnExists tableName="MO_ADDRESSES" columnName="ORDER_ID" />
            <columnExists tableName="ADDRESS_ALLOCATION_ORDERS" columnName="ID" />
        </preConditions>
        <comment>Создание внешнего ключа FK_MO_ADDRESSES_ORDER_ID</comment>
        <addForeignKeyConstraint baseColumnNames="ORDER_ID"
                                 baseTableName="MO_ADDRESSES"
                                 constraintName="FK_MO_ADDRESSES_ORDER_ID"
                                 referencedColumnNames="ID"
                                 referencedTableName="ADDRESS_ALLOCATION_ORDERS"/>
    </changeSet>

    <changeSet id="CONTINGENT2-AREA-6-3" author="sorlov" labels="1.0.0.0">
        <preConditions onFail="MARK_RAN">
            <not>
                <indexExists indexName="IXFK_MO_ADDRESSES_REJECT_O_ID"/>
            </not>
        </preConditions>
        <comment>Создание индекса колонки REJECT_ORDER_ID таблицы MO_ADDRESSES</comment>
        <createIndex indexName="IXFK_MO_ADDRESSES_REJECT_O_ID"
                     tableName="MO_ADDRESSES"
                     unique="false">
            <column name="REJECT_ORDER_ID" type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="CONTINGENT2-AREA-6-4" author="sorlov" labels="1.0.0.0">
        <preConditions onFail="MARK_RAN">
            <columnExists tableName="MO_ADDRESSES" columnName="REJECT_ORDER_ID" />
            <columnExists tableName="ADDRESS_ALLOCATION_ORDERS" columnName="ID" />
        </preConditions>
        <comment>Создание внешнего ключа FK_MO_ADDRESSES_R_O_ID</comment>
        <addForeignKeyConstraint baseColumnNames="REJECT_ORDER_ID"
                                 baseTableName="MO_ADDRESSES"
                                 constraintName="FK_MO_ADDRESSES_R_O_ID"
                                 referencedColumnNames="ID"
                                 referencedTableName="ADDRESS_ALLOCATION_ORDERS"/>
    </changeSet>

    <changeSet id="CONTINGENT2-AREA-6-5" author="sorlov" labels="1.0.0.0">
        <preConditions onFail="MARK_RAN">
            <not>
                <indexExists indexName="IXFK_MO_ADDRESSES_AREA_TYPE"/>
            </not>
        </preConditions>
        <comment>Создание индекса колонки AREA_TYPE_CODE таблицы MO_ADDRESSES</comment>
        <createIndex indexName="IXFK_MO_ADDRESSES_AREA_TYPE"
                     tableName="MO_ADDRESSES"
                     unique="false">
            <column name="AREA_TYPE_CODE" type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="CONTINGENT2-AREA-6-6" author="sorlov" labels="1.0.0.0">
        <preConditions onFail="MARK_RAN">
            <columnExists tableName="MO_ADDRESSES" columnName="AREA_TYPE_CODE" />
            <columnExists tableName="AREA_TYPE" columnName="CODE" />
        </preConditions>
        <comment>Создание внешнего ключа FK_MO_ADDRESSES_AREA_TYPE</comment>
        <addForeignKeyConstraint baseColumnNames="AREA_TYPE_CODE"
                                 baseTableName="MO_ADDRESSES"
                                 constraintName="FK_MO_ADDRESSES_AREA_TYPE"
                                 referencedColumnNames="CODE"
                                 referencedTableName="AREA_TYPE"/>
    </changeSet>

    <changeSet id="CONTINGENT2-AREA-6-7" author="ddryuchin" labels="1.0.0.0">
        <preConditions onFail="MARK_RAN">
            <columnExists tableName="MO_ADDRESSES" columnName="ADDRESS_ID" />
            <columnExists tableName="ADDRESSES" columnName="ID" />
        </preConditions>
        <comment>Создание внешнего ключа FK_MO_ADDRESSES_AREA_TYPE</comment>
        <addForeignKeyConstraint baseColumnNames="ADDRESS_ID"
                                 baseTableName="MO_ADDRESSES"
                                 constraintName="FK_MO_ADDRESSES_ADDRESS"
                                 referencedColumnNames="ID"
                                 referencedTableName="ADDRESSES"/>
    </changeSet>

    <changeSet id="CONTINGENT2-AREA-6-8" author="sorlov">
        <preConditions onFail="MARK_RAN">
            <not>
                <sequenceExists sequenceName="SEQ_MO_ADDRESSES"/>
            </not>
        </preConditions>
        <comment>Создание сиквенса для таблицы MO_ADDRESSES</comment>
        <createSequence sequenceName="SEQ_MO_ADDRESSES"/>
        <rollback>
            <dropSequence sequenceName="SEQ_MO_ADDRESSES"/>
        </rollback>
    </changeSet>

    <changeSet id="CONTINGENT2-AREA-6-9" author="ddryuchin">
        <dropNotNullConstraint columnDataType="BIGINT"
                               columnName="MU_ID"
                               tableName="AREAS"/>
    </changeSet>
    <!-- !!!! MO_ADDRESSES !!!! -->

    <!-- AREA_POLICY_TYPES -->
    <changeSet id="CONTINGENT2-AREA-7" author="ddryuchin" labels="1.0.0.0">
        <preConditions onFail="MARK_RAN">
            <not>
                <tableExists tableName="AREA_POLICY_TYPES"/>
            </not>
        </preConditions>
        <comment>Создание таблицы AREA_POLICY_TYPES</comment>
        <createTable tableName="AREA_POLICY_TYPES">
            <column name="ID" type="BIGINT">
                <constraints primaryKey="true" nullable="false" />
            </column>
            <column name="AREA_ID" type="BIGINT" />
            <column name="POLICY_TYPE_CODE" type="BIGINT"  />
        </createTable>
        <rollback>
            <dropTable tableName="AREA_POLICY_TYPES"/>
        </rollback>
    </changeSet>

    <changeSet id="CONTINGENT2-AREA-7-1" author="ddryuchin" labels="1.0.0.0">
        <preConditions onFail="MARK_RAN">
            <columnExists tableName="AREA_POLICY_TYPES" columnName="AREA_ID" />
            <columnExists tableName="AREAS" columnName="ID" />
        </preConditions>
        <comment>Создание внешнего ключа FK_APT_AREAID</comment>
        <addForeignKeyConstraint baseColumnNames="AREA_ID"
                                 baseTableName="AREA_POLICY_TYPES"
                                 constraintName="FK_APT_AREAID"
                                 referencedColumnNames="ID"
                                 referencedTableName="AREAS"/>
    </changeSet>

    <changeSet id="CONTINGENT2-AREA-7-2" author="ddryuchin" labels="1.0.0.0">
        <preConditions onFail="MARK_RAN">
            <not>
                <indexExists indexName="IXFK_APT_AREAID"/>
            </not>
        </preConditions>
        <comment>Создание индекса колонки AREA_ID таблицы AREA_POLICY_TYPES</comment>
        <createIndex indexName="IXFK_APT_AREAID"
                     tableName="AREA_POLICY_TYPES"
                     unique="false">
            <column name="AREA_ID" type="BIGINT"/>
        </createIndex>
    </changeSet>

    <changeSet id="CONTINGENT2-AREA-7-3" author="ddryuchin" labels="1.0.0.0">
        <preConditions onFail="MARK_RAN">
            <columnExists tableName="AREA_POLICY_TYPES" columnName="POLICY_TYPE_CODE" />
            <columnExists tableName="POLICY_TYPE" columnName="CODE" />
        </preConditions>
        <comment>Создание внешнего ключа FK_APT_PTC</comment>
        <addForeignKeyConstraint baseColumnNames="POLICY_TYPE_CODE"
                                 baseTableName="AREA_POLICY_TYPES"
                                 constraintName="FK_APT_PTC"
                                 referencedColumnNames="CODE"
                                 referencedTableName="POLICY_TYPE"/>
    </changeSet>

    <changeSet id="CONTINGENT2-AREA-7-4" author="ddryuchin" labels="1.0.0.0">
        <preConditions onFail="MARK_RAN">
            <not>
                <indexExists indexName="IXFK_APT_PTC"/>
            </not>
        </preConditions>
        <comment>Создание индекса колонки POLICY_TYPE_CODE таблицы AREA_POLICY_TYPES</comment>
        <createIndex indexName="IXFK_APT_PTC"
                     tableName="AREA_POLICY_TYPES"
                     unique="false">
            <column name="POLICY_TYPE_CODE" type="BIGINT"/>
        </createIndex>
    </changeSet>
    <!-- !!!! AREA_POLICY_TYPES !!!! -->

    <!-- MO_AVAILABLE_AREA_TYPES -->
    <changeSet id="CONTINGENT2-AREA-8" author="ddryuchin" labels="1.0.0.0">
        <preConditions onFail="MARK_RAN">
            <not>
                <tableExists tableName="MO_AVAILABLE_AREA_TYPES"/>
            </not>
        </preConditions>
        <comment>Создание таблицы MO_AVAILABLE_AREA_TYPES</comment>
        <createTable tableName="MO_AVAILABLE_AREA_TYPES">
            <column name="ID" type="BIGINT">
                <constraints primaryKey="true" nullable="false" />
            </column>
            <column name="MO_ID" type="BIGINT" />
            <column name="AREA_TYPE_CODE" type="BIGINT" />
            <column name="CREATE_DATE" type="TIMESTAMP(6)">
                <constraints nullable="false" />
            </column>
        </createTable>
        <rollback>
            <dropTable tableName="MO_AVAILABLE_AREA_TYPES"/>
        </rollback>
    </changeSet>

    <changeSet id="CONTINGENT2-AREA-8-1" author="ddryuchin" labels="1.0.0.0">
        <preConditions onFail="MARK_RAN">
            <columnExists tableName="MO_AVAILABLE_AREA_TYPES" columnName="AREA_TYPE_CODE" />
            <columnExists tableName="AREA_TYPE" columnName="CODE" />
        </preConditions>
        <comment>Создание внешнего ключа FK_MAAT_AREA_TYPE_CODE</comment>
        <addForeignKeyConstraint baseColumnNames="AREA_TYPE_CODE"
                                 baseTableName="MO_AVAILABLE_AREA_TYPES"
                                 constraintName="FK_MAAT_AREA_TYPE_CODE"
                                 referencedColumnNames="CODE"
                                 referencedTableName="AREA_TYPE"/>
    </changeSet>

    <changeSet id="CONTINGENT2-AREA-8-2" author="ddryuchin" labels="1.0.0.0">
        <preConditions onFail="MARK_RAN">
            <not>
                <indexExists indexName="IXFK_MAAT_AREA_TYPE_CODE"/>
            </not>
        </preConditions>
        <comment>Создание индекса колонки AREA_TYPE_CODE таблицы MO_AVAILABLE_AREA_TYPES</comment>
        <createIndex indexName="IXFK_MAAT_AREA_TYPE_CODE"
                     tableName="MO_AVAILABLE_AREA_TYPES"
                     unique="false">
            <column name="AREA_TYPE_CODE" type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="CONTINGENT2-AREA-8-3" author="ddryuchin" labels="1.0.0.0">
        <preConditions onFail="MARK_RAN">
            <not>
                <indexExists indexName="IXFK_MAAT_MOID"/>
            </not>
        </preConditions>
        <comment>Создание индекса колонки MO_ID таблицы MO_AVAILABLE_AREA_TYPES</comment>
        <createIndex indexName="IXFK_MAAT_MOID"
                     tableName="MO_AVAILABLE_AREA_TYPES"
                     unique="false">
            <column name="MO_ID" type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="CONTINGENT2-AREA-8-4" author="sorlov">
        <preConditions onFail="MARK_RAN">
            <not>
                <sequenceExists sequenceName="SEQ_MO_AVAILABLE_AREA_TYPES"/>
            </not>
        </preConditions>
        <comment>Создание сиквенса для таблицы SEQ_MO_AVAILABLE_AREA_TYPES</comment>
        <createSequence sequenceName="SEQ_MO_AVAILABLE_AREA_TYPES"/>
        <rollback>
            <dropSequence sequenceName="SEQ_MO_AVAILABLE_AREA_TYPES"/>
        </rollback>
    </changeSet>
    <!-- !!!! MO_AVAILABLE_AREA_TYPES !!!! -->

    <!-- MU_AVAILABLE_AREA_TYPES -->
    <changeSet id="CONTINGENT2-AREA-9" author="ddryuchin" labels="1.0.0.0">
        <preConditions onFail="MARK_RAN">
            <not>
                <tableExists tableName="MU_AVAILABLE_AREA_TYPES"/>
            </not>
        </preConditions>
        <comment>Создание таблицы MO_AVAILABLE_AREA_TYPES</comment>
        <createTable tableName="MU_AVAILABLE_AREA_TYPES">
            <column name="ID" type="BIGINT">
                <constraints primaryKey="true" nullable="false" />
            </column>
            <column name="MU_ID" type="BIGINT" />
            <column name="AREA_TYPE_CODE" type="BIGINT" />
            <column name="MO_AVAILABLE_AREA_TYPES_ID" type="BIGINT" />
            <column name="CREATE_DATE" type="TIMESTAMP(6)">
                <constraints nullable="false" />
            </column>
        </createTable>
        <rollback>
            <dropTable tableName="MU_AVAILABLE_AREA_TYPES"/>
        </rollback>
    </changeSet>

    <changeSet id="CONTINGENT2-AREA-9-1" author="ddryuchin" labels="1.0.0.0">
        <preConditions onFail="MARK_RAN">
            <columnExists tableName="MU_AVAILABLE_AREA_TYPES" columnName="AREA_TYPE_CODE" />
            <columnExists tableName="AREA_TYPE" columnName="CODE" />
        </preConditions>
        <comment>Создание внешнего ключа FK_MUAAT_AREA_TYPE_CODE</comment>
        <addForeignKeyConstraint baseColumnNames="AREA_TYPE_CODE"
                                 baseTableName="MU_AVAILABLE_AREA_TYPES"
                                 constraintName="FK_MUAAT_AREA_TYPE_CODE"
                                 referencedColumnNames="CODE"
                                 referencedTableName="AREA_TYPE"/>
    </changeSet>

    <changeSet id="CONTINGENT2-AREA-9-2" author="ddryuchin" labels="1.0.0.0">
        <preConditions onFail="MARK_RAN">
            <not>
                <indexExists indexName="IXFK_MUAAT_AREA_TYPE_CODE"/>
            </not>
        </preConditions>
        <comment>Создание индекса колонки AREA_TYPE_CODE таблицы MU_AVAILABLE_AREA_TYPES</comment>
        <createIndex indexName="IXFK_MUAAT_AREA_TYPE_CODE"
                     tableName="MU_AVAILABLE_AREA_TYPES"
                     unique="false">
            <column name="AREA_TYPE_CODE" type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="CONTINGENT2-AREA-9-3" author="ddryuchin" labels="1.0.0.0">
        <preConditions onFail="MARK_RAN">
            <not>
                <indexExists indexName="IXFK_MUAAT_MUID"/>
            </not>
        </preConditions>
        <comment>Создание индекса колонки MU_ID таблицы MU_AVAILABLE_AREA_TYPES</comment>
        <createIndex indexName="IXFK_MUAAT_MOID"
                     tableName="MU_AVAILABLE_AREA_TYPES"
                     unique="false">
            <column name="MU_ID" type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="CONTINGENT2-AREA-9-4" author="ddryuchin" labels="1.0.0.0">
        <preConditions onFail="MARK_RAN">
            <columnExists tableName="MU_AVAILABLE_AREA_TYPES" columnName="MO_AVAILABLE_AREA_TYPES_ID" />
            <columnExists tableName="MO_AVAILABLE_AREA_TYPES" columnName="ID" />
        </preConditions>
        <comment>Создание внешнего ключа FK_MUAAT_MAAT_ID</comment>
        <addForeignKeyConstraint baseColumnNames="MO_AVAILABLE_AREA_TYPES_ID"
                                 baseTableName="MU_AVAILABLE_AREA_TYPES"
                                 constraintName="FK_MUAAT_MAAT_ID"
                                 referencedColumnNames="ID"
                                 referencedTableName="MO_AVAILABLE_AREA_TYPES"/>
    </changeSet>

    <changeSet id="CONTINGENT2-AREA-9-5" author="ddryuchin" labels="1.0.0.0">
        <preConditions onFail="MARK_RAN">
            <not>
                <indexExists indexName="IXFK_MUAAT_MAAT_ID"/>
            </not>
        </preConditions>
        <comment>Создание индекса колонки MO_AVAILABLE_AREA_TYPES_ID таблицы MU_AVAILABLE_AREA_TYPES</comment>
        <createIndex indexName="MUAAT_MAAT_ID"
                     tableName="MU_AVAILABLE_AREA_TYPES"
                     unique="false">
            <column name="MO_AVAILABLE_AREA_TYPES_ID" type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="CONTINGENT2-AREA-9-6" author="sorlov">
        <preConditions onFail="MARK_RAN">
            <not>
                <sequenceExists sequenceName="SEQ_MU_AVAILABLE_AREA_TYPES"/>
            </not>
        </preConditions>
        <comment>Создание сиквенса для таблицы SEQ_MU_AVAILABLE_AREA_TYPES</comment>
        <createSequence sequenceName="SEQ_MU_AVAILABLE_AREA_TYPES"/>
        <rollback>
            <dropSequence sequenceName="SEQ_MU_AVAILABLE_AREA_TYPES"/>
        </rollback>
    </changeSet>

    <!-- !!!! MU_AVAILABLE_AREA_TYPES !!!! -->

    <!-- AREA_ADDRESSES -->
    <changeSet id="CONTINGENT2-AREA-10" author="sorlov" labels="1.0.0.0">
        <preConditions onFail="MARK_RAN">
            <not>
                <tableExists tableName="AREA_ADDRESSES"/>
            </not>
        </preConditions>
        <comment>Создание таблицы AREA_ADDRESSES</comment>
        <createTable tableName="AREA_ADDRESSES"
                     remarks="Распределение к участку">
            <column name="ID" type="BIGINT">
                <constraints primaryKey="true" nullable="false" />
            </column>
            <column name="MO_ADDRESS_ID" type="BIGINT" />
            <column name="AREA_ID" type="BIGINT" />
            <column name="ADDRESS_ID" type="BIGINT"  />
            <column name="START_DATE" type="TIMESTAMP(6)" />
            <column name="END_DATE" type="TIMESTAMP(6)" />
            <column name="CREATE_DATE" type="TIMESTAMP(6)">
                <constraints nullable="false" />
            </column>
            <column name="UPDATE_DATE" type="TIMESTAMP(6)" />
        </createTable>
        <rollback>
            <dropTable tableName="AREA_ADDRESSES"/>
        </rollback>
    </changeSet>

    <changeSet id="CONTINGENT2-AREA-10-1" author="sorlov" labels="1.0.0.0">
        <preConditions onFail="MARK_RAN">
            <not>
                <indexExists indexName="IXFK_AREA_ADDRESSES_MO_ADDR_ID"/>
            </not>
        </preConditions>
        <comment>Создание индекса колонки MO_ADDRESS_ID таблицы AREA_ADDRESSES</comment>
        <createIndex indexName="IXFK_AREA_ADDRESSES_MO_ADDR_ID"
                     tableName="AREA_ADDRESSES"
                     unique="false">
            <column name="MO_ADDRESS_ID" type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="CONTINGENT2-AREA-10-2" author="sorlov" labels="1.0.0.0">
        <preConditions onFail="MARK_RAN">
            <not>
                <indexExists indexName="IXFK_AREA_ADDRESSES_AREA_ID"/>
            </not>
        </preConditions>
        <comment>Создание индекса колонки AREA_ID таблицы AREA_ADDRESSES</comment>
        <createIndex indexName="IXFK_AREA_ADDRESSES_AREA_ID"
                     tableName="AREA_ADDRESSES"
                     unique="false">
            <column name="AREA_ID" type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="CONTINGENT2-AREA-10-3" author="sorlov" labels="1.0.0.0">
        <preConditions onFail="MARK_RAN">
            <not>
                <indexExists indexName="IXFK_AREA_ADDRESSES_ADDRESS_ID"/>
            </not>
        </preConditions>
        <comment>Создание индекса колонки ADDRESS_ID таблицы AREA_ADDRESSES</comment>
        <createIndex indexName="IXFK_AREA_ADDRESSES_ADDRESS_ID"
                     tableName="AREA_ADDRESSES"
                     unique="false">
            <column name="ADDRESS_ID" type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="CONTINGENT2-AREA-10-4" author="sorlov" labels="1.0.0.0">
        <preConditions onFail="MARK_RAN">
            <columnExists tableName="AREA_ADDRESSES" columnName="MO_ADDRESS_ID" />
            <columnExists tableName="MO_ADDRESSES" columnName="ID" />
        </preConditions>
        <comment>Создание внешнего ключа FK_AREA_ADDRESSES_MO_ADDRESSES</comment>
        <addForeignKeyConstraint baseColumnNames="MO_ADDRESS_ID"
                                 baseTableName="AREA_ADDRESSES"
                                 constraintName="FK_AREA_ADDRESSES_MO_ADDRESSES"
                                 referencedColumnNames="ID"
                                 referencedTableName="MO_ADDRESSES"/>
    </changeSet>

    <changeSet id="CONTINGENT2-AREA-10-5" author="sorlov" labels="1.0.0.0">
        <preConditions onFail="MARK_RAN">
            <columnExists tableName="AREA_ADDRESSES" columnName="AREA_ID" />
            <columnExists tableName="AREAS" columnName="ID" />
        </preConditions>
        <comment>Создание внешнего ключа FK_AREA_ADDRESSES_AREAS</comment>
        <addForeignKeyConstraint baseColumnNames="AREA_ID"
                                 baseTableName="AREA_ADDRESSES"
                                 constraintName="FK_AREA_ADDRESSES_AREAS"
                                 referencedColumnNames="ID"
                                 referencedTableName="AREAS"/>
    </changeSet>

    <changeSet id="CONTINGENT2-AREA-10-6" author="sorlov" labels="1.0.0.0">
        <preConditions onFail="MARK_RAN">
            <columnExists tableName="AREA_ADDRESSES" columnName="ADDRESS_ID" />
            <columnExists tableName="ADDRESSES" columnName="ID" />
        </preConditions>
        <comment>Создание внешнего ключа FK_AREA_ADDRESSES_ADDRESSES</comment>
        <addForeignKeyConstraint baseColumnNames="ADDRESS_ID"
                                 baseTableName="AREA_ADDRESSES"
                                 constraintName="FK_AREA_ADDRESSES_ADDRESSES"
                                 referencedColumnNames="ID"
                                 referencedTableName="ADDRESSES"/>
    </changeSet>

    <changeSet id="CONTINGENT2-AREA-10-6" author="ddryuchin">
        <preConditions onFail="MARK_RAN">
            <not>
                <sequenceExists sequenceName="SEQ_AREA_ADDRESS"/>
            </not>
        </preConditions>
        <comment>Создание сиквенса для таблицы AREA_ADDRESS</comment>
        <createSequence sequenceName="SEQ_AREA_ADDRESS"/>
        <rollback>
            <dropSequence sequenceName="SEQ_AREA_ADDRESS"/>
        </rollback>
    </changeSet>

    <changeSet id="CONTINGENT2-148" author="shnaider">
        <preConditions onFail="MARK_RAN">
            <not>
                <sequenceExists sequenceName="SEQ_AREA_POLICY_TYPES"/>
            </not>
        </preConditions>
        <comment>Создание сиквенса для таблицы SEQ_AREA_POLICY_TYPES</comment>
        <createSequence sequenceName="SEQ_AREA_POLICY_TYPES"/>
        <rollback>
            <dropSequence sequenceName="SEQ_AREA_POLICY_TYPES"/>
        </rollback>
    </changeSet>
    <!-- !!!! AREA_ADDRESSES !!!! -->

    <changeSet id="CONTINGENT2-277-3" author="sorlov" labels="1.0.0.0">
        <preConditions onFail="MARK_RAN">
            <columnExists tableName="ADDRESSES" columnName="AFE_ID"/>
            <columnExists tableName="ADDRESSES" columnName="BR_ID"/>
        </preConditions>
        <dropColumn tableName="ADDRESSES" columnName="AFE_ID"/>
        <dropColumn tableName="ADDRESSES" columnName="BR_ID"/>
        <rollback>
            <addColumn tableName="ADDRESSES">
                <column name="AFE_ID" type="BIGINT" />
                <column name="BR_ID" type="BIGINT" />
            </addColumn>
        </rollback>
    </changeSet>

    <changeSet id="CONTINGENT2-277-4" author="sorlov" labels="1.0.0.0">
        <preConditions onFail="MARK_RAN">
            <columnExists tableName="ADDRESSES" columnName="LEVEL"/>
        </preConditions>
        <dropColumn tableName="ADDRESSES" columnName="LEVEL"/>
        <addColumn tableName="ADDRESSES">
            <column name="AOLEVEL" type="VARCHAR2(2)"/>
        </addColumn>
        <rollback>
            <dropColumn tableName="ADDRESSES" columnName="AOLEVEL"/>
            <addColumn tableName="ADDRESSES">
                <column name="LEVEL" type="SMALLINT">
                    <constraints nullable="false" />
                </column>
            </addColumn>
        </rollback>
    </changeSet>

    <changeSet id="CONTINGENT2-277-5" author="sorlov" labels="1.0.0.0">
        <preConditions onFail="MARK_RAN">
            <tableExists tableName="ADDRESSES"/>
            <not>
                <columnExists tableName="ADDRESSES" columnName="GLOBAL_ID"/>
            </not>
        </preConditions>
        <addColumn tableName="ADDRESSES">
            <column name="GLOBAL_ID" type="BIGINT" remarks="ИД НСИ" />
            <column name="REGION_TE_CODE" type="VARCHAR2(4)" remarks="Код округа ОМК ТЕ"/>
            <column name="REGION_TE_NAME" type="VARCHAR2(4000)" />
            <column name="REGION_TE_TYPENAME" type="VARCHAR2(256)" />
            <column name="REGION_TE_TYPENAME_SHORT" type="VARCHAR2(256)" />
            <column name="AREACODE_OMK_TE" type="VARCHAR2(4000)" remarks="Код района ОМК ТЕ"/>
            <column name="AREA_TE_NAME" type="VARCHAR2(4000)" />
            <column name="AREA_TE_TYPENAME" type="VARCHAR2(128)" />
            <column name="AREA_TE_TYPENAME_SHORT" type="VARCHAR2(128)" />
            <column name="AREACODE" type="VARCHAR2(3)" remarks="Код района"/>
            <column name="AREA_BTI_CODE" type="VARCHAR2(11)"/>
            <column name="AREA_NAME" type="VARCHAR2(4000)" />
            <column name="AREA_TYPENAME" type="VARCHAR2(128)" />
            <column name="AREA_TYPENAME_SHORT" type="VARCHAR2(128)" />
            <column name="CITYCODE" type="VARCHAR2(3)" remarks="Код города"/>
            <column name="CITY_BTI_CODE" type="VARCHAR2(11)"/>
            <column name="CITY_NAME" type="VARCHAR2(4000)" />
            <column name="CITY_TYPENAME" type="VARCHAR2(128)" />
            <column name="CITY_TYPENAME_SHORT" type="VARCHAR2(128)" />
            <column name="PLACECODE" type="VARCHAR2(3)" remarks="Код населенного пункта"/>
            <column name="PLACE_BTI_CODE" type="VARCHAR2(11)" remarks="Код населенного пункта"/>
            <column name="PLACE_NAME" type="VARCHAR2(4000)" />
            <column name="PLACE_TYPENAME" type="VARCHAR2(128)" />
            <column name="PLACE_TYPENAME_SHORT" type="VARCHAR2(128)" />
            <column name="PLANCODE" type="VARCHAR2(4)" remarks="Код элемента планировочной структуры"/>
            <column name="PLAN_BTI_CODE" type="VARCHAR2(11)"/>
            <column name="PLAN_NAME" type="VARCHAR2(4000)" />
            <column name="PLAN_TYPENAME" type="VARCHAR2(128)" />
            <column name="PLAN_TYPENAME_SHORT" type="VARCHAR2(128)" />
            <column name="STREETCODE" type="VARCHAR2(4)" remarks="Код улицы"/>
            <column name="STREET_NAME" type="VARCHAR2(4000)" />
            <column name="STREET_OMK_UM" type="VARCHAR2(10)" remarks="Код ОМК УМ улицы"/>
            <column name="STREET_TYPENAME" type="VARCHAR2(128)" />
            <column name="STREET_TYPENAME_SHORT" type="VARCHAR2(128)" />
            <column name="STREET_BTI_CODE" type="VARCHAR2(11)" />
            <column name="L1_TYPE" type="VARCHAR2(256)" remarks="Тип номера дома, владения"/>
            <column name="L1_TYPE_SHORT" type="VARCHAR2(16)"/>
            <column name="L1_VALUE" type="VARCHAR2(256)" remarks="Номер дома, владения"/>
            <column name="L2_TYPE" type="VARCHAR2(256)" remarks="Тип номера корпуса"/>
            <column name="L2_TYPE_SHORT" type="VARCHAR2(16)"/>
            <column name="L2_VALUE" type="VARCHAR2(256)" remarks="Номер корпуса"/>
            <column name="L3_TYPE" type="VARCHAR2(256)" remarks="Тип номера строения, сооружения"/>
            <column name="L3_TYPE_SHORT" type="VARCHAR2(16)"/>
            <column name="L3_VALUE" type="VARCHAR2(256)" remarks="Номер строения, сооружения"/>
            <column name="ADDRESS" type="VARCHAR2(4000)" defaultValue="">
                <constraints nullable="false"/>
            </column>
            <column name="UPDATE_DATE" type="TIMESTAMP(6)" defaultValueComputed="CURRENT_TIMESTAMP">
                <constraints nullable="false"/>
            </column>
        </addColumn>
        <rollback>
            <dropColumn tableName="ADDRESSES" columnName="GLOBAL_ID"/>
            <dropColumn tableName="ADDRESSES" columnName="REGION_TE_CODE"/>
            <dropColumn tableName="ADDRESSES" columnName="REGION_TE_NAME"/>
            <dropColumn tableName="ADDRESSES" columnName="REGION_TE_TYPENAME"/>
            <dropColumn tableName="ADDRESSES" columnName="REGION_TE_TYPENAME_SHORT"/>
            <dropColumn tableName="ADDRESSES" columnName="AREACODE_OMK_TE"/>
            <dropColumn tableName="ADDRESSES" columnName="AREA_TE_NAME"/>
            <dropColumn tableName="ADDRESSES" columnName="AREA_TE_TYPENAME"/>
            <dropColumn tableName="ADDRESSES" columnName="AREA_TE_TYPENAME_SHORT"/>
            <dropColumn tableName="ADDRESSES" columnName="AREACODE"/>
            <dropColumn tableName="ADDRESSES" columnName="AREA_BTI_CODE"/>
            <dropColumn tableName="ADDRESSES" columnName="AREA_NAME"/>
            <dropColumn tableName="ADDRESSES" columnName="AREA_TYPENAME"/>
            <dropColumn tableName="ADDRESSES" columnName="AREA_TYPENAME_SHORT"/>
            <dropColumn tableName="ADDRESSES" columnName="CITYCODE"/>
            <dropColumn tableName="ADDRESSES" columnName="CITY_BTI_CODE"/>
            <dropColumn tableName="ADDRESSES" columnName="CITY_NAME"/>
            <dropColumn tableName="ADDRESSES" columnName="CITY_TYPENAME"/>
            <dropColumn tableName="ADDRESSES" columnName="CITY_TYPENAME_SHORT"/>
            <dropColumn tableName="ADDRESSES" columnName="PLACECODE"/>
            <dropColumn tableName="ADDRESSES" columnName="PLACE_BTI_CODE"/>
            <dropColumn tableName="ADDRESSES" columnName="PLACE_NAME"/>
            <dropColumn tableName="ADDRESSES" columnName="PLACE_TYPENAME"/>
            <dropColumn tableName="ADDRESSES" columnName="PLACE_TYPENAME_SHORT"/>
            <dropColumn tableName="ADDRESSES" columnName="PLANCODE"/>
            <dropColumn tableName="ADDRESSES" columnName="PLAN_BTI_CODE"/>
            <dropColumn tableName="ADDRESSES" columnName="PLAN_NAME"/>
            <dropColumn tableName="ADDRESSES" columnName="PLAN_TYPENAME"/>
            <dropColumn tableName="ADDRESSES" columnName="PLAN_TYPENAME_SHORT"/>
            <dropColumn tableName="ADDRESSES" columnName="STREETCODE"/>
            <dropColumn tableName="ADDRESSES" columnName="STREET_NAME"/>
            <dropColumn tableName="ADDRESSES" columnName="STREET_OMK_UM"/>
            <dropColumn tableName="ADDRESSES" columnName="STREET_TYPENAME"/>
            <dropColumn tableName="ADDRESSES" columnName="STREET_TYPENAME_SHORT"/>
            <dropColumn tableName="ADDRESSES" columnName="STREET_BTI_CODE"/>
            <dropColumn tableName="ADDRESSES" columnName="L1_TYPE"/>
            <dropColumn tableName="ADDRESSES" columnName="L1_TYPE_SHORT"/>
            <dropColumn tableName="ADDRESSES" columnName="L1_VALUE"/>
            <dropColumn tableName="ADDRESSES" columnName="L2_TYPE"/>
            <dropColumn tableName="ADDRESSES" columnName="L2_TYPE_SHORT"/>
            <dropColumn tableName="ADDRESSES" columnName="L2_VALUE"/>
            <dropColumn tableName="ADDRESSES" columnName="L3_TYPE"/>
            <dropColumn tableName="ADDRESSES" columnName="L3_TYPE_SHORT"/>
            <dropColumn tableName="ADDRESSES" columnName="L3_VALUE"/>
            <dropColumn tableName="ADDRESSES" columnName="ADDRESS"/>
            <dropColumn tableName="ADDRESSES" columnName="UPDATE_DATE"/>
        </rollback>
    </changeSet>

    <!-- View definitions -->
    <changeSet id="CONTINGENT2-314-1" author="sorlov" labels="1.0.0.0">
        <preConditions onFail="MARK_RAN">
            <not>
                <viewExists viewName="AREAS_VIEW"/>
            </not>
        </preConditions>
        <comment>Создание view AREAS_VIEW</comment>
        <createView replaceIfExists="true"
                    viewName="AREAS_VIEW">SELECT id, mo_id, mu_id, area_type_code, number, is_auto_assign_for_attach,
                        description, attach_by_medical_reason, age_min, age_max, age_m_min, age_m_max,
                        age_w_min, age_w_max, create_date, update_date, archived FROM areas</createView>
        <rollback>
            <dropView viewName="AREAS_VIEW" />
        </rollback>
    </changeSet>

    <changeSet id="CONTINGENT2-315-1" author="sorlov" labels="1.0.0.0">
        <preConditions onFail="MARK_RAN">
            <not>
                <viewExists viewName="AREA_MEDICAL_EMPLOYEES_VIEW"/>
            </not>
        </preConditions>
        <comment>Создание view AREA_MEDICAL_EMPLOYEES_VIEW</comment>
        <createView replaceIfExists="true"
                    viewName="AREA_MEDICAL_EMPLOYEES_VIEW">SELECT id, medical_employee_job_id, area_id, is_replacement, start_date,
                        end_date, position_code, subdivision_id, create_date, update_date FROM area_medical_employees</createView>
        <rollback>
            <dropView viewName="AREA_MEDICAL_EMPLOYEES_VIEW" />
        </rollback>
    </changeSet>

</databaseChangeLog>
