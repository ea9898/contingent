<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog
        xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.6.xsd">

    <changeSet id="CONTINGENT2-57-1" author="sorlov" labels="1.0.0.0">
        <preConditions onFail="MARK_RAN">
            <not>
                <tableExists tableName="ADDRESS_FORMING_ELEMENT"/>
            </not>
        </preConditions>
        <comment>Создание таблицы ADDRESS_FORMING_ELEMENT</comment>
        <createTable tableName="ADDRESS_FORMING_ELEMENT"
                     remarks="Адресообразующий элемент">
            <column name="ID" type="BIGINT">
                <constraints primaryKey="true" nullable="false" />
            </column>
            <column name="GLOBAL_ID" type="BIGINT" remarks="Уникальный идентификатор объекта" />
            <column name="AO_LEVEL" type="VARCHAR2(2)" remarks="Уровень адресного объекта"/>
            <column name="REGION_TE_ID" type="BIGINT" />
            <column name="REGION_TE_CODE" type="VARCHAR2(4)" remarks="Код округа ОМК ТЕ"/>
            <column name="REGION_TE_NAME" type="VARCHAR2(4000)" />
            <column name="REGION_TE_TYPE_NAME" type="VARCHAR2(256)" />
            <column name="AREA_TE_ID" type="BIGINT" />
            <column name="AREA_CODE_OMK_TE" type="VARCHAR2(50)" remarks="Код района ОМК ТЕ"/>
            <column name="AREA_TE_NAME" type="VARCHAR2(4000)" />
            <column name="AREA_TE_TYPE_NAME" type="VARCHAR2(128)" />
            <column name="AREA_ID" type="BIGINT" />
            <column name="AREA_CODE" type="VARCHAR2(3)" remarks="Код района"/>
            <column name="AREA_NAME" type="VARCHAR2(4000)" />
            <column name="AREA_TYPE_NAME" type="VARCHAR2(128)" />
            <column name="CITY_ID" type="BIGINT" />
            <column name="CITY_CODE" type="VARCHAR2(3)" remarks="Код города"/>
            <column name="CITY_NAME" type="VARCHAR2(4000)" />
            <column name="CITY_TYPE_NAME" type="VARCHAR2(128)" />
            <column name="PLACE_ID" type="BIGINT" />
            <column name="PLACE_CODE" type="VARCHAR2(3)" remarks="Код населенного пункта"/>
            <column name="PLACE_NAME" type="VARCHAR2(4000)" />
            <column name="PLACE_TYPE_NAME" type="VARCHAR2(128)" />
            <column name="PLAN_ID" type="BIGINT" />
            <column name="PLAN_CODE" type="VARCHAR2(3)" remarks="Код элемента планировочной структуры"/>
            <column name="PLAN_NAME" type="VARCHAR2(4000)" />
            <column name="PLAN_TYPE_NAME" type="VARCHAR2(128)" />
            <column name="STREET_ID" type="BIGINT" />
            <column name="STREET_CODE" type="VARCHAR2(4)" remarks="Код улицы"/>
            <column name="STREET_NAME" type="VARCHAR2(4000)" />
            <column name="STREET_OMK_UM" type="VARCHAR2(10)" remarks="Код ОМК УМ улицы"/>
            <column name="STREET_TYPE_NAME" type="VARCHAR2(128)" />
            <column name="ADDRESS" type="VARCHAR2(4000)" remarks="Полное наименование адресообразующего элемента" />
        </createTable>
        <rollback>
            <dropTable tableName="ADDRESS_FORMING_ELEMENT"/>
        </rollback>
    </changeSet>

    <changeSet id="CONTINGENT2-57-ф-1" author="ddryuchin" labels="1.0.0.0">
        <preConditions onFail="MARK_RAN">
            <not>
                <indexExists indexName="IXFK_AFE_GLOBAL_ID"/>
            </not>
        </preConditions>
        <comment>Создание индекса колонки GLOBAL_ID таблицы ADDRESS_FORMING_ELEMENT</comment>
        <createIndex indexName="IXFK_AFE_GLOBAL_ID"
                     tableName="ADDRESS_FORMING_ELEMENT"
                     unique="false">
            <column name="GLOBAL_ID" type="BIGINT"/>
        </createIndex>
    </changeSet>

    <changeSet id="CONTINGENT2-57-3" author="sorlov" labels="1.0.0.0">
        <preConditions onFail="MARK_RAN">
            <not>
                <tableExists tableName="AREA_TYPE_CLASS"/>
            </not>
        </preConditions>
        <comment>Создание таблицы AREA_TYPE_CLASS</comment>
        <createTable tableName="AREA_TYPE_CLASS">
            <column name="CODE" type="BIGINT">
                <constraints primaryKey="true" nullable="false" />
            </column>
            <column name="TITLE" type="VARCHAR2(255)" />
            <column name="ARCHIVED" type="NUMBER(1)" defaultValue="0">
                <constraints nullable="false" />
            </column>
        </createTable>
        <rollback>
            <dropTable tableName="AREA_TYPE_CLASS"/>
        </rollback>
    </changeSet>

    <changeSet id="CONTINGENT2-57-4" author="sorlov" labels="1.0.0.0">
        <preConditions onFail="MARK_RAN">
            <not>
                <tableExists tableName="AREA_TYPE_KIND"/>
            </not>
        </preConditions>
        <comment>Создание таблицы AREA_TYPE_KIND</comment>
        <createTable tableName="AREA_TYPE_KIND">
            <column name="CODE" type="BIGINT">
                <constraints primaryKey="true" nullable="false" />
            </column>
            <column name="TITLE" type="VARCHAR2(255)" />
            <column name="ARCHIVED" type="NUMBER(1)" defaultValue="0">
                <constraints nullable="false" />
            </column>
        </createTable>
        <rollback>
            <dropTable tableName="AREA_TYPE_KIND"/>
        </rollback>
    </changeSet>

    <changeSet id="CONTINGENT2-57-5" author="sorlov" labels="1.0.0.0">
        <preConditions onFail="MARK_RAN">
            <not>
                <tableExists tableName="SPECIALIZATION"/>
            </not>
        </preConditions>
        <comment>Создание таблицы SPECIALIZATION</comment>
        <createTable tableName="SPECIALIZATION">
            <column name="ID" type="BIGINT">
                <constraints primaryKey="true" nullable="false" />
            </column>
            <column name="TITLE" type="VARCHAR2(100)">
                <constraints nullable="false" />
            </column>
            <column name="CODE" type="NUMBER(3)" />
            <column name="ARCHIVED" type="NUMBER(1)" defaultValue="0">
                <constraints nullable="false" />
            </column>
        </createTable>
        <rollback>
            <dropTable tableName="SPECIALIZATION"/>
        </rollback>
    </changeSet>

    <changeSet id="CONTINGENT2-57-6" author="sorlov" labels="1.0.0.0">
        <preConditions onFail="MARK_RAN">
            <not>
                <tableExists tableName="AREA_TYPES"/>
            </not>
        </preConditions>
        <comment>Создание таблицы AREA_TYPES</comment>
        <createTable tableName="AREA_TYPES"
                     remarks="Тип участка">
            <column name="CODE" type="BIGINT" remarks="Код типа участка">
                <constraints primaryKey="true" nullable="false" />
            </column>
            <column name="TITLE" type="VARCHAR2(100)" />
            <column name="AREA_TYPE_KIND_CODE" type="BIGINT" />
            <column name="AREA_TYPE_CLASS_CODE" type="BIGINT" remarks="Класс типа участка. Код" />
            <column name="HEAD_FINANCE" type="NUMBER(1)" remarks="Поголовное финансирование"/>
            <column name="ATTACH_BY_MEDICAL_REASON" type="NUMBER(1)" remarks="Прикрепление по медицинским показаниям"/>
            <column name="HAS_SERVICE_TERRITORY" type="NUMBER(1)" remarks="Наличие территории обслуживания"/>
            <column name="ATTACH_BY_REQUEST" type="NUMBER(1)" remarks="Прикрепление по заявлению"/>
            <column name="MPGU_AVAILABLE" type="NUMBER(1)" remarks="Возможно прикрепление через МПГУ"/>
            <column name="AREA_COUNT_LIMIT_CODE" type="NUMBER(4)" remarks="Ограничение количества участков"/>
            <column name="GENDER_CODE" type="VARCHAR2(1)" remarks="Пол, 0 - любой, 1 - м, 2- ж" />
            <column name="RESIDENTS_BIND_RATE" type="NUMBER(8)" remarks="Норма прикрепления	" />
            <column name="AGE_MIN" type="SMALLINT" remarks="Возраст мин" />
            <column name="AGE_MAX" type="SMALLINT" remarks="Возраст макс" />
            <column name="AGE_M_MIN" type="SMALLINT" remarks="Возраст М мин" />
            <column name="AGE_M_MAX" type="SMALLINT" remarks="Возраст М макс" />
            <column name="AGE_W_MIN" type="SMALLINT" remarks="Возраст Ж мин" />
            <column name="AGE_W_MAX" type="SMALLINT" remarks="Возраст Ж макс" />
            <column name="ARCHIVED" type="NUMBER(1)" defaultValue="0">
                <constraints nullable="false" />
            </column>
            <column name="SPECIALIZATION_CODE" type="BIGINT" />
        </createTable>
        <rollback>
            <dropTable tableName="AREA_TYPES"/>
        </rollback>
    </changeSet>

    <changeSet id="CONTINGENT2-57-6-1" author="sorlov" labels="1.0.0.0">
        <preConditions onFail="MARK_RAN">
            <not>
                <indexExists indexName="IXFK_AREA_TYPE_CLASS_ARE01"/>
            </not>
        </preConditions>
        <comment>Создание индекса колонки AREA_TYPE_CLASS_CODE таблицы AREA_TYPES</comment>
        <createIndex indexName="IXFK_AREA_TYPE_CLASS_ARE01"
                     tableName="AREA_TYPES"
                     unique="false">
            <column name="AREA_TYPE_CLASS_CODE" type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="CONTINGENT2-57-6-2" author="sorlov" labels="1.0.0.0">
        <preConditions onFail="MARK_RAN">
            <not>
                <indexExists indexName="IXFK_AREA_TYPE_KIND_AREA01"/>
            </not>
        </preConditions>
        <comment>Создание индекса колонки AREA_TYPE_KIND_CODE таблицы AREA_TYPE</comment>
        <createIndex indexName="IXFK_AREA_TYPE_KIND_AREA01"
                     tableName="AREA_TYPES"
                     unique="false">
            <column name="AREA_TYPE_KIND_CODE" type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="CONTINGENT2-57-6-3" author="sorlov" labels="1.0.0.0">
        <preConditions onFail="MARK_RAN">
            <not>
                <indexExists indexName="IXFK_AREA_TYPES_SPECIALIZATION"/>
            </not>
        </preConditions>
        <comment>Создание индекса колонки SPECIALIZATION_ID таблицы AREA_TYPES</comment>
        <createIndex indexName="IXFK_AREA_TYPES_SPECIALIZATION"
                     tableName="AREA_TYPES"
                     unique="false">
            <column name="SPECIALIZATION_CODE" type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="CONTINGENT2-57-6-4" author="sorlov" labels="1.0.0.0">
        <preConditions onFail="MARK_RAN">
            <columnExists tableName="AREA_TYPES" columnName="AREA_TYPE_CLASS_CODE" />
            <columnExists tableName="AREA_TYPE_CLASS" columnName="CODE" />
        </preConditions>
        <comment>Создание внешнего ключа FK_AREA_AREA_TYPE_CLASS_TYPES</comment>
        <addForeignKeyConstraint baseColumnNames="AREA_TYPE_CLASS_CODE"
                                 baseTableName="AREA_TYPES"
                                 constraintName="FK_AREA_AREA_TYPE_CLASS_TYPES"
                                 referencedColumnNames="CODE"
                                 referencedTableName="AREA_TYPE_CLASS"/>
    </changeSet>

    <changeSet id="CONTINGENT2-57-6-5" author="sorlov" labels="1.0.0.0">
        <preConditions onFail="MARK_RAN">
            <columnExists tableName="AREA_TYPES" columnName="AREA_TYPE_KIND_CODE" />
            <columnExists tableName="AREA_TYPE_KIND" columnName="CODE" />
        </preConditions>
        <comment>Создание внешнего ключа FK_AREA_TYPES_AREA_TYPE_KIND</comment>
        <addForeignKeyConstraint baseColumnNames="AREA_TYPE_KIND_CODE"
                                 baseTableName="AREA_TYPES"
                                 constraintName="FK_AREA_AREA_TYPE_KIND_TYPES"
                                 referencedColumnNames="CODE"
                                 referencedTableName="AREA_TYPE_KIND"/>
    </changeSet>

    <changeSet id="CONTINGENT2-57-6-6" author="sorlov" labels="1.0.0.0">
        <preConditions onFail="MARK_RAN">
            <columnExists tableName="AREA_TYPES" columnName="SPECIALIZATION_CODE" />
            <columnExists tableName="SPECIALIZATION" columnName="ID" />
        </preConditions>
        <comment>Создание внешнего ключа FK_AREA_TYPES_SPECIALIZATION</comment>
        <addForeignKeyConstraint baseColumnNames="SPECIALIZATION_CODE"
                                 baseTableName="AREA_TYPES"
                                 constraintName="FK_AREA_TYPES_SPECIALIZATION"
                                 referencedColumnNames="ID"
                                 referencedTableName="SPECIALIZATION"/>
    </changeSet>

    <changeSet id="CONTINGENT2-57-7" author="sorlov" labels="1.0.0.0">
        <preConditions onFail="MARK_RAN">
            <not>
                <tableExists tableName="POSITION_NOM"/>
            </not>
        </preConditions>
        <comment>Создание таблицы POSITION_NOM</comment>
        <createTable tableName="POSITION_NOM"
                     remarks="Номенклатура должностей медицинских организаций, оказывающих первичную медико-санитарную помощь">
            <column name="ID" type="BIGINT">
                <constraints primaryKey="true" nullable="false" />
            </column>
            <column name="CODE" type="VARCHAR2(100)">
                <constraints nullable="false" />
            </column>
            <column name="TITLE" type="VARCHAR2(1000)">
                <constraints nullable="false" />
            </column>
            <column name="START_DATE" type="TIMESTAMP(6)" remarks="Дата начала работы на участке">
                <constraints nullable="false" />
            </column>
            <column name="END_DATE" type="TIMESTAMP(6)" remarks="Дата окончания работы на участке" />
            <column name="SPECIALIZATION_ID" type="BIGINT" />
            <column name="ARCHIVED" type="NUMBER(1)" defaultValue="0">
                <constraints nullable="false" />
            </column>
        </createTable>
        <rollback>
            <dropTable tableName="POSITION_NOM"/>
        </rollback>
    </changeSet>

    <changeSet id="CONTINGENT2-57-7-1" author="ddryuchin" labels="1.0.0.0">
        <preConditions onFail="MARK_RAN">
            <columnExists tableName="SPECIALIZATION" columnName="ID" />
            <columnExists tableName="POSITION_NOM" columnName="SPECIALIZATION_ID" />
        </preConditions>
        <comment>Создание внешнего ключа FK_POSITION_NOM_SPECIALIZATION_01</comment>
        <addForeignKeyConstraint baseColumnNames="SPECIALIZATION_ID"
                                 baseTableName="POSITION_NOM"
                                 constraintName="FK_POSITION_NOM_SPECIALIZATION_01"
                                 referencedColumnNames="ID"
                                 referencedTableName="SPECIALIZATION"/>
    </changeSet>

    <changeSet id="CONTINGENT2-57-7-2" author="ddryuchin" labels="1.0.0.0">
        <preConditions onFail="MARK_RAN">
            <not>
                <indexExists indexName="IXFK_POSITION_NOM_SPECIALIZATIONO01"/>
            </not>
        </preConditions>
        <comment>Создание индекса колонки SPECIALIZATION_ID таблицы POSITION_NOM</comment>
        <createIndex indexName="IXFK_POSITION_NOM_SPECIALIZATIONO01"
                     tableName="POSITION_NOM"
                     unique="false">
            <column name="SPECIALIZATION_ID" type="BIGINT"/>
        </createIndex>
    </changeSet>



    <changeSet id="CONTINGENT2-57-8" author="sorlov" labels="1.0.0.0">
        <preConditions onFail="MARK_RAN">
            <not>
                <tableExists tableName="AREA_TYPE_MEDICAL_POSITIONS"/>
            </not>
        </preConditions>
        <comment>Создание таблицы AREA_TYPE_MEDICAL_POSITIONS</comment>
        <createTable tableName="AREA_TYPE_MEDICAL_POSITIONS"
                     remarks="Должности МР на типе участка">
            <column name="ID" type="BIGINT">
                <constraints primaryKey="true" nullable="false" />
            </column>
            <column name="AREA_TYPE_CODE" type="BIGINT" remarks="Тип участка. Код" />
            <column name="POSITION_CODE" type="BIGINT" />
            <column name="ARCHIVED" type="NUMBER(1)" defaultValue="0">
                <constraints nullable="false" />
            </column>
        </createTable>
        <rollback>
            <dropTable tableName="AREA_TYPE_MEDICAL_POSITIONS"/>
        </rollback>
    </changeSet>

    <changeSet id="CONTINGENT2-57-8-1" author="sorlov" labels="1.0.0.0">
        <preConditions onFail="MARK_RAN">
            <not>
                <indexExists indexName="IXFK_AREA_TYPE_ME_POSITIO01"/>
            </not>
        </preConditions>
        <comment>Создание индекса колонки POSITION_NOM_ID таблицы AREA_TYPE_MEDICAL_POSITIONS</comment>
        <createIndex indexName="IXFK_AREA_TYPE_ME_POSITIO01"
                     tableName="AREA_TYPE_MEDICAL_POSITIONS"
                     unique="false">
            <column name="POSITION_CODE" type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="CONTINGENT2-57-8-2" author="sorlov" labels="1.0.0.0">
        <preConditions onFail="MARK_RAN">
            <not>
                <indexExists indexName="IXFK_AREA_TYPE_MEDI_AREA_01"/>
            </not>
        </preConditions>
        <comment>Создание индекса колонки AREA_TYPE_CODE таблицы AREA_TYPE_MEDICAL_POSITIONS</comment>
        <createIndex indexName="IXFK_AREA_TYPE_MEDI_AREA_01"
                     tableName="AREA_TYPE_MEDICAL_POSITIONS"
                     unique="false">
            <column name="AREA_TYPE_CODE" type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="CONTINGENT2-57-8-3" author="sorlov" labels="1.0.0.0">
        <preConditions onFail="MARK_RAN">
            <columnExists tableName="AREA_TYPE_MEDICAL_POSITIONS" columnName="AREA_TYPE_CODE" />
            <columnExists tableName="POSITION_NOM" columnName="ID" />
        </preConditions>
        <comment>Создание внешнего ключа FK_AREA_TYPE_ME_POSITION_NO_01</comment>
        <addForeignKeyConstraint baseColumnNames="POSITION_CODE"
                                 baseTableName="AREA_TYPE_MEDICAL_POSITIONS"
                                 constraintName="FK_AREA_TYPE_ME_POSITION_NO_01"
                                 referencedColumnNames="ID"
                                 referencedTableName="POSITION_NOM"/>
    </changeSet>

    <changeSet id="CONTINGENT2-57-8-4" author="sorlov" labels="1.0.0.0">
        <preConditions onFail="MARK_RAN">
            <columnExists tableName="AREA_TYPE_MEDICAL_POSITIONS" columnName="AREA_TYPE_CODE" />
            <columnExists tableName="AREA_TYPES" columnName="CODE" />
        </preConditions>
        <comment>Создание внешнего ключа FK_AREA_TYPE_MEDI_AREA_TYPE</comment>
        <addForeignKeyConstraint baseColumnNames="AREA_TYPE_CODE"
                                 baseTableName="AREA_TYPE_MEDICAL_POSITIONS"
                                 constraintName="FK_AREA_TYPE_MEDI_AREA_TYPE"
                                 referencedColumnNames="CODE"
                                 referencedTableName="AREA_TYPES"/>
    </changeSet>

    <changeSet id="CONTINGENT2-57-9" author="sorlov" labels="1.0.0.0">
        <preConditions onFail="MARK_RAN">
            <not>
                <tableExists tableName="AREA_TYPE_RELATIONS"/>
            </not>
        </preConditions>
        <comment>Создание таблицы AREA_TYPE_RELATIONS</comment>
        <createTable tableName="AREA_TYPE_RELATIONS"
                     remarks="Связь зависимых и первичных">
            <column name="ID" type="BIGINT">
                <constraints primaryKey="true" nullable="false" />
            </column>
            <column name="DEPENDENT_AREA_TYPE_CODE" type="BIGINT" remarks="Код зависимого типа участка">
                <constraints nullable="false" />
            </column>
            <column name="PRIMARY_AREA_TYPE_CODE" type="BIGINT" remarks="Код первичного типа участка">
                <constraints nullable="false" />
            </column>
            <column name="ARCHIVED" type="NUMBER(1)" defaultValue="0">
                <constraints nullable="false" />
            </column>
        </createTable>
        <rollback>
            <dropTable tableName="AREA_TYPE_RELATIONS"/>
        </rollback>
    </changeSet>

    <changeSet id="CONTINGENT2-57-9-1" author="sorlov" labels="1.0.0.0">
        <preConditions onFail="MARK_RAN">
            <not>
                <indexExists indexName="IXFK_AREA_TYPE_RELA_AREA_DEP"/>
            </not>
        </preConditions>
        <comment>Создание индекса колонки DEPENDENT_AREA_TYPE_CODE таблицы AREA_TYPE_RELATIONS</comment>
        <createIndex indexName="IXFK_AREA_TYPE_RELA_AREA_DEP"
                     tableName="AREA_TYPE_RELATIONS"
                     unique="false">
            <column name="DEPENDENT_AREA_TYPE_CODE" type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="CONTINGENT2-57-9-2" author="sorlov" labels="1.0.0.0">
        <preConditions onFail="MARK_RAN">
            <not>
                <indexExists indexName="IXFK_AREA_TYPE_RELA_AREA_PRIM"/>
            </not>
        </preConditions>
        <comment>Создание индекса колонки PRIMARY_AREA_TYPE_CODE таблицы AREA_TYPE_RELATIONS</comment>
        <createIndex indexName="IXFK_AREA_TYPE_RELA_AREA_PRIM"
                     tableName="AREA_TYPE_RELATIONS"
                     unique="false">
            <column name="PRIMARY_AREA_TYPE_CODE" type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="CONTINGENT2-57-9-3" author="sorlov" labels="1.0.0.0">
        <preConditions onFail="MARK_RAN">
            <columnExists tableName="AREA_TYPE_RELATIONS" columnName="DEPENDENT_AREA_TYPE_CODE" />
            <columnExists tableName="AREA_TYPES" columnName="CODE" />
        </preConditions>
        <comment>Создание внешнего ключа FK_AREA_TYPE_REL_AREA_TYPE_DEP</comment>
        <addForeignKeyConstraint baseColumnNames="DEPENDENT_AREA_TYPE_CODE"
                                 baseTableName="AREA_TYPE_RELATIONS"
                                 constraintName="FK_AREA_TYPE_REL_AREA_TYPE_DEP"
                                 referencedColumnNames="CODE"
                                 referencedTableName="AREA_TYPES"/>
    </changeSet>

    <changeSet id="CONTINGENT2-57-9-4" author="sorlov" labels="1.0.0.0">
        <preConditions onFail="MARK_RAN">
            <columnExists tableName="AREA_TYPE_RELATIONS" columnName="PRIMARY_AREA_TYPE_CODE" />
            <columnExists tableName="AREA_TYPES" columnName="CODE" />
        </preConditions>
        <comment>Создание внешнего ключа FK_AREA_TYPE_REL_AREA_TYPE_PRI</comment>
        <addForeignKeyConstraint baseColumnNames="PRIMARY_AREA_TYPE_CODE"
                                 baseTableName="AREA_TYPE_RELATIONS"
                                 constraintName="FK_AREA_TYPE_REL_AREA_TYPE_PRI"
                                 referencedColumnNames="CODE"
                                 referencedTableName="AREA_TYPES"/>
    </changeSet>

    <changeSet id="CONTINGENT2-57-10" author="sorlov" labels="1.0.0.0">
        <preConditions onFail="MARK_RAN">
            <not>
                <tableExists tableName="MU_TYPE_AREA_TYPES"/>
            </not>
        </preConditions>
        <comment>Создание таблицы MU_TYPE_AREA_TYPES</comment>
        <createTable tableName="MU_TYPE_AREA_TYPES"
                     remarks="Шаблон профиля МУ">
            <column name="ID" type="BIGINT">
                <constraints primaryKey="true" nullable="false" />
            </column>
            <column name="MU_TYPE_CODE" type="SMALLINT" />
            <column name="AREA_TYPE_CODE" type="BIGINT" />
            <column name="AVAILABLE_TO_CREATE" type="NUMBER(1)" />
            <column name="ARCHIVED" type="NUMBER(1)" defaultValue="0">
                <constraints nullable="false" />
            </column>
        </createTable>
        <rollback>
            <dropTable tableName="MU_TYPE_AREA_TYPES"/>
        </rollback>
    </changeSet>

    <changeSet id="CONTINGENT2-57-10-1" author="sorlov" labels="1.0.0.0">
        <preConditions onFail="MARK_RAN">
            <not>
                <indexExists indexName="IXFK_MU_TEMPLATE_PR_AREA_01"/>
            </not>
        </preConditions>
        <comment>Создание индекса колонки AREA_TYPE_CODE таблицы MU_TYPE_AREA_TYPES</comment>
        <createIndex indexName="IXFK_MU_TEMPLATE_PR_AREA_01"
                     tableName="MU_TYPE_AREA_TYPES"
                     unique="false">
            <column name="AREA_TYPE_CODE" type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="CONTINGENT2-57-10-2" author="sorlov" labels="1.0.0.0">
        <preConditions onFail="MARK_RAN">
            <columnExists tableName="MU_TYPE_AREA_TYPES" columnName="AREA_TYPE_CODE" />
            <columnExists tableName="AREA_TYPES" columnName="CODE" />
        </preConditions>
        <comment>Создание внешнего ключа FK_MU_TEMPLATE_PR_AREA_TYPE</comment>
        <addForeignKeyConstraint baseColumnNames="AREA_TYPE_CODE"
                                 baseTableName="MU_TYPE_AREA_TYPES"
                                 constraintName="FK_MU_TEMPLATE_PR_AREA_TYPE"
                                 referencedColumnNames="CODE"
                                 referencedTableName="AREA_TYPES"/>
    </changeSet>

    <changeSet id="CONTINGENT2-57-13" author="sorlov" labels="1.0.0.0">
        <preConditions onFail="MARK_RAN">
            <not>
                <tableExists tableName="BUILDING_REGISTRY"/>
            </not>
        </preConditions>
        <comment>Создание таблицы BUILDING_REGISTRY</comment>
        <createTable tableName="BUILDING_REGISTRY"
                     remarks="Сведения по отдельным зданиям, сооружениям">
            <column name="ID" type="BIGINT" >
                <constraints primaryKey="true" nullable="false" />
            </column>
            <column name="GLOBAL_ID" type="BIGINT" remarks="Уникальный идентификатор объекта" />
            <column name="AFE_ID" type="BIGINT">
                <constraints nullable="false" />
            </column>
            <column name="ADDR_ID" type="BIGINT" />
            <column name="L1_TYPE" type="VARCHAR2(256)" remarks="Тип номера дома, владения"/>
            <column name="L1_VALUE" type="VARCHAR2(256)" remarks="Номер дома, владения"/>
            <column name="L2_TYPE" type="VARCHAR2(256)" remarks="Тип номера корпуса"/>
            <column name="L2_VALUE" type="VARCHAR2(256)" remarks="Номер корпуса"/>
            <column name="L3_TYPE" type="VARCHAR2(256)" remarks="Тип номера строения, сооружения"/>
            <column name="L3_VALUE" type="VARCHAR2(256)" remarks="Номер строения, сооружения"/>
            <column name="ADDRESS" type="VARCHAR2(4000)" remarks="Адрес" />
        </createTable>
        <rollback>
            <dropTable tableName="BUILDING_REGISTRY"/>
        </rollback>
    </changeSet>

    <changeSet id="CONTINGENT2-57-13-1" author="sorlov" labels="1.0.0.0">
        <preConditions onFail="MARK_RAN">
            <not>
                <indexExists indexName="IDX_BUILDING_REGISTRY_AFE_ID"/>
            </not>
        </preConditions>
        <comment>Создание индекса колонки ADDRESS_FORMING_ELEMENT_ID таблицы BUILDING_REGISTRY</comment>
        <createIndex indexName="IDX_BUILDING_REGISTRY_AFE_ID"
                     tableName="BUILDING_REGISTRY"
                     unique="false">
            <column name="AFE_ID" type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="CONTINGENT2-57-13-3" author="sorlov" labels="1.0.0.0">
        <preConditions onFail="MARK_RAN">
            <columnExists tableName="BUILDING_REGISTRY" columnName="AFE_ID" />
            <columnExists tableName="ADDRESS_FORMING_ELEMENT" columnName="ID" />
        </preConditions>
        <comment>Создание внешнего ключа FK_BUILDING_REGISTRY_AFE</comment>
        <addForeignKeyConstraint baseColumnNames="AFE_ID"
                                 baseTableName="BUILDING_REGISTRY"
                                 constraintName="FK_BUILDING_REGISTRY_AFE"
                                 referencedColumnNames="ID"
                                 referencedTableName="ADDRESS_FORMING_ELEMENT"/>
    </changeSet>

    <changeSet id="CONTINGENT2-57-13-4" author="ddryuchin" labels="1.0.0.0">
        <preConditions onFail="MARK_RAN">
            <not>
                <indexExists indexName="IDX_BUILDING_REGISTRY_GLOBAL_ID"/>
            </not>
        </preConditions>
        <comment>Создание индекса колонки GLOBAL_ID таблицы BUILDING_REGISTRY</comment>
        <createIndex indexName="IDX_BUILDING_REGISTRY_GLOBAL_ID"
                     tableName="BUILDING_REGISTRY"
                     unique="false">
            <column name="GLOBAL_ID" type="BIGINT"/>
        </createIndex>
    </changeSet>

    <changeSet id="CONTINGENT2-76-3" author="sorlov">
        <preConditions onFail="MARK_RAN">
            <not>
                <sequenceExists sequenceName="SEQ_BUILDING_REGISTRY"/>
            </not>
        </preConditions>
        <comment>Создание сиквенса для таблицы BUILDING_REGISTRY</comment>
        <createSequence sequenceName="SEQ_BUILDING_REGISTRY"/>
        <rollback>
            <dropSequence sequenceName="SEQ_BUILDING_REGISTRY"/>
        </rollback>
    </changeSet>

    <changeSet id="CONTINGENT2-3-1" author="ddryuchin" labels="1.0.0.0">
        <preConditions onFail="MARK_RAN">
            <not>
                <tableExists tableName="POLICY_TYPE"/>
            </not>
        </preConditions>
        <comment>Создание таблицы POLICY_TYPE</comment>
        <createTable tableName="POLICY_TYPE"
                     remarks="Тип полиса">
            <column name="CODE" type="BIGINT" >
                <constraints primaryKey="true" nullable="false" />
            </column>
            <column name="TITLE" type="VARCHAR2(100)">
                <constraints nullable="false" />
            </column>
            <column name="ARCHIVED" type="NUMBER(1)" defaultValue="0">
                <constraints nullable="false" />
            </column>
        </createTable>
        <rollback>
            <dropTable tableName="POLICY_TYPE"/>
        </rollback>
    </changeSet>

    <changeSet id="CONTINGENT2-3-2" author="ddryuchin" labels="1.0.0.0">
        <preConditions onFail="MARK_RAN">
            <not>
                <tableExists tableName="POLICY_SERVICE_TYPES"/>
            </not>
        </preConditions>
        <comment>Создание таблицы POLICY_SERVICE_TYPES</comment>
        <createTable tableName="POLICY_SERVICE_TYPES"
                     remarks="Тип обслуживаемого полиса">
            <column name="ID" type="BIGINT" >
                <constraints primaryKey="true" nullable="false" />
            </column>
            <column name="AREA_TYPE_CODE" type="BIGINT" remarks="Идентификатор Типа участка">
                <constraints nullable="false" />
            </column>
            <column name="POLICY_TYPE_CODE" type="BIGINT" remarks="Идентификатор Типа полиса">
                <constraints nullable="false" />
            </column>
            <column name="ARCHIVED" type="NUMBER(1)" defaultValue="0">
                <constraints nullable="false" />
            </column>
        </createTable>
        <rollback>
            <dropTable tableName="POLICY_SERVICE_TYPES"/>
        </rollback>
    </changeSet>

    <changeSet id="CONTINGENT2-3-2-1" author="ddryuchin" labels="1.0.0.0">
        <preConditions onFail="MARK_RAN">
            <columnExists tableName="AREA_TYPES" columnName="CODE" />
            <columnExists tableName="POLICY_SERVICE_TYPES" columnName="AREA_TYPE_CODE" />
        </preConditions>
        <comment>Создание внешнего ключа FK_POLICY_SERVICE_TYPES_ATC_01</comment>
        <addForeignKeyConstraint baseColumnNames="AREA_TYPE_CODE"
                                 baseTableName="POLICY_SERVICE_TYPES"
                                 constraintName="FK_POSITION_NOM_SPECIALIZATION_01"
                                 referencedColumnNames="CODE"
                                 referencedTableName="AREA_TYPES"/>
    </changeSet>

    <changeSet id="CONTINGENT2-3-2-2" author="ddryuchin" labels="1.0.0.0">
        <preConditions onFail="MARK_RAN">
            <not>
                <indexExists indexName="IXFK_POLICY_SERVICE_TYPES01"/>
            </not>
        </preConditions>
        <comment>Создание индекса колонки AREA_TYPE_CODE таблицы POLICY_SERVICE_TYPES</comment>
        <createIndex indexName="IXFK_POLICY_SERVICE_TYPES01"
                     tableName="POLICY_SERVICE_TYPES"
                     unique="false">
            <column name="AREA_TYPE_CODE" type="BIGINT"/>
        </createIndex>
    </changeSet>

    <changeSet id="CONTINGENT2-3-2-3" author="ddryuchin" labels="1.0.0.0">
        <preConditions onFail="MARK_RAN">
            <columnExists tableName="POLICY_TYPE" columnName="CODE" />
            <columnExists tableName="POLICY_SERVICE_TYPES" columnName="POLICY_TYPE_CODE" />
        </preConditions>
        <comment>Создание внешнего ключа FK_POLICY_SERVICE_TYPES_PTC_01</comment>
        <addForeignKeyConstraint baseColumnNames="POLICY_TYPE_CODE"
                                 baseTableName="POLICY_SERVICE_TYPES"
                                 constraintName="FK_POLICY_SERVICE_TYPES_PTC_01"
                                 referencedColumnNames="CODE"
                                 referencedTableName="POLICY_TYPE"/>
    </changeSet>

    <changeSet id="CONTINGENT2-3-2-4" author="ddryuchin" labels="1.0.0.0">
        <preConditions onFail="MARK_RAN">
            <not>
                <indexExists indexName="IXFK_POLICY_SERVICE_TYPES02"/>
            </not>
        </preConditions>
        <comment>Создание индекса колонки POLICY_TYPE_CODE таблицы POLICY_SERVICE_TYPES</comment>
        <createIndex indexName="IXFK_POLICY_SERVICE_TYPES02"
                     tableName="POLICY_SERVICE_TYPES"
                     unique="false">
            <column name="POLICY_TYPE_CODE" type="BIGINT"/>
        </createIndex>
    </changeSet>

</databaseChangeLog>
