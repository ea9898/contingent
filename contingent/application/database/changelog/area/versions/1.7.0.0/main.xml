<?xml version='1.0' encoding='UTF-8' ?>
<databaseChangeLog
        xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.6.xsd">

    <changeSet id="1.7.0.0" author="ddryuchin" labels ="1.7.0.0">
        <tagDatabase tag="1.7.0.0"/>
    </changeSet>

    <changeSet id="CONTINGENT2-913-1" author="ddryuchin" labels="1.7.0.0">
        <preConditions onFail="MARK_RAN">
            <columnExists tableName="addresses" columnName="KOD_GIVZ"/>
        </preConditions>
        <comment>Изменение колонки KOD_GIVZ таблицы addresses</comment>
        <modifyDataType tableName="addresses" columnName="KOD_GIVZ" newDataType="VARCHAR2(4000)"/>
    </changeSet>

    <changeSet id="CONTINGENT2-913-2" author="ddryuchin" labels="1.7.0.0">
        <preConditions onFail="MARK_RAN">
            <columnExists tableName="addresses" columnName="AREA_BTI_CODE"/>
        </preConditions>
        <comment>Изменение колонки AREA_BTI_CODE таблицы addresses</comment>
        <modifyDataType tableName="addresses" columnName="AREA_BTI_CODE" newDataType="VARCHAR2(4000)"/>
    </changeSet>

    <changeSet id="CONTINGENT2-913-3" author="ddryuchin" labels="1.7.0.0">
        <preConditions onFail="MARK_RAN">
            <columnExists tableName="addresses" columnName="PLACE_BTI_CODE"/>
        </preConditions>
        <comment>Изменение колонки  таблицы addresses</comment>
        <modifyDataType tableName="addresses" columnName="PLACE_BTI_CODE" newDataType="VARCHAR2(4000)"/>
    </changeSet>

    <changeSet id="CONTINGENT2-913-4" author="ddryuchin" labels="1.7.0.0">
        <preConditions onFail="MARK_RAN">
            <columnExists tableName="addresses" columnName="CITY_BTI_CODE"/>
        </preConditions>
        <comment>Изменение колонки CITY_BTI_CODE таблицы addresses</comment>
        <modifyDataType tableName="addresses" columnName="CITY_BTI_CODE" newDataType="VARCHAR2(4000)"/>
    </changeSet>

    <changeSet id="CONTINGENT2-913-5" author="ddryuchin" labels="1.7.0.0">
        <preConditions onFail="MARK_RAN">
            <columnExists tableName="addresses" columnName="PLAN_BTI_CODE"/>
        </preConditions>
        <comment>Изменение колонки PLAN_BTI_CODE таблицы addresses</comment>
        <modifyDataType tableName="addresses" columnName="PLAN_BTI_CODE" newDataType="VARCHAR2(4000)"/>
    </changeSet>

    <changeSet id="CONTINGENT2-913-6" author="ddryuchin" labels="1.7.0.0">
        <preConditions onFail="MARK_RAN">
            <columnExists tableName="addresses" columnName="STREET_BTI_CODE"/>
        </preConditions>
        <comment>Изменение колонки STREET_BTI_CODE таблицы addresses</comment>
        <modifyDataType tableName="addresses" columnName="STREET_BTI_CODE" newDataType="VARCHAR2(4000)"/>
    </changeSet>

    <changeSet id="CONTINGENT2-913-7" author="ddryuchin" labels="1.7.0.0">
        <preConditions onFail="MARK_RAN">
            <columnExists tableName="nsi_address_forming_element" columnName="KOD_GIVZ"/>
        </preConditions>
        <comment>Изменение колонки KOD_GIVZ таблицы nsi_address_forming_element</comment>
        <modifyDataType tableName="nsi_address_forming_element" columnName="KOD_GIVZ" newDataType="VARCHAR2(4000)"/>
    </changeSet>

    <changeSet id="CONTINGENT2-913-8" author="ddryuchin" labels="1.7.0.0">
        <preConditions onFail="MARK_RAN">
            <columnExists tableName="nsi_address_forming_element" columnName="AREA_BTI_CODE"/>
        </preConditions>
        <comment>Изменение колонки AREA_BTI_CODE таблицы nsi_address_forming_element</comment>
        <modifyDataType tableName="nsi_address_forming_element" columnName="AREA_BTI_CODE" newDataType="VARCHAR2(4000)"/>
    </changeSet>

    <changeSet id="CONTINGENT2-913-9" author="ddryuchin" labels="1.7.0.0">
        <preConditions onFail="MARK_RAN">
            <columnExists tableName="nsi_address_forming_element" columnName="PLACE_BTI_CODE"/>
        </preConditions>
        <comment>Изменение колонки  таблицы nsi_address_forming_element</comment>
        <modifyDataType tableName="nsi_address_forming_element" columnName="PLACE_BTI_CODE" newDataType="VARCHAR2(4000)"/>
    </changeSet>

    <changeSet id="CONTINGENT2-913-10" author="ddryuchin" labels="1.7.0.0">
        <preConditions onFail="MARK_RAN">
            <columnExists tableName="nsi_address_forming_element" columnName="CITY_BTI_CODE"/>
        </preConditions>
        <comment>Изменение колонки CITY_BTI_CODE таблицы nsi_address_forming_element</comment>
        <modifyDataType tableName="nsi_address_forming_element" columnName="CITY_BTI_CODE" newDataType="VARCHAR2(4000)"/>
    </changeSet>

    <changeSet id="CONTINGENT2-913-11" author="ddryuchin" labels="1.7.0.0">
        <preConditions onFail="MARK_RAN">
            <columnExists tableName="nsi_address_forming_element" columnName="PLAN_BTI_CODE"/>
        </preConditions>
        <comment>Изменение колонки PLAN_BTI_CODE таблицы nsi_address_forming_element</comment>
        <modifyDataType tableName="nsi_address_forming_element" columnName="PLAN_BTI_CODE" newDataType="VARCHAR2(4000)"/>
    </changeSet>

    <changeSet id="CONTINGENT2-913-12" author="ddryuchin" labels="1.7.0.0">
        <preConditions onFail="MARK_RAN">
            <columnExists tableName="nsi_address_forming_element" columnName="STREET_BTI_CODE"/>
        </preConditions>
        <comment>Изменение колонки STREET_BTI_CODE таблицы nsi_address_forming_element</comment>
        <modifyDataType tableName="nsi_address_forming_element" columnName="STREET_BTI_CODE" newDataType="VARCHAR2(4000)"/>
    </changeSet>

    <changeSet id="CONTINGENT2-884" author="ddryuchin" labels="1.7.0.0">
        <preConditions onFail="MARK_RAN">
            <not>
                <indexExists indexName="idx_address_id_mo_addresses"/>
            </not>
        </preConditions>
        <comment>Создание индекса колонки address_id таблицы mo_addresses</comment>
        <createIndex indexName="idx_address_id_mo_addresses"
                     tableName="mo_addresses"
                     unique="false">
            <column name="address_id" type="number"/>
        </createIndex>
    </changeSet>

</databaseChangeLog>
