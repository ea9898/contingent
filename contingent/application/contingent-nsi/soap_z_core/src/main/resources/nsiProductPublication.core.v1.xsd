<?xml version="1.0" encoding="UTF-8"?>
<xs:schema xmlns="http://emias.mos.ru/nsiProductPublication/core/v1/" xmlns:xs="http://www.w3.org/2001/XMLSchema"
           targetNamespace="http://emias.mos.ru/nsiProductPublication/core/v1/" elementFormDefault="qualified"
           attributeFormDefault="unqualified">
    <xs:include schemaLocation="emias.core.v1.xsd"/>




    <xs:complexType name="ehdCatalogs">
        <xs:sequence>
            <xs:element name="list" type="ehdCatalog" minOccurs="0" maxOccurs="unbounded"/>
        </xs:sequence>
    </xs:complexType>
    <xs:complexType name="ehdCatalog">
        <xs:sequence>
            <xs:element name="id" type="xs:long" nillable="true"/>
            <xs:element name="name" type="xs:string"/>
            <xs:element name="fullName" type="xs:string"/>
            <xs:element name="technicalName" type="xs:string"/>
            <xs:element name="shortName" type="xs:string"/>
            <xs:element name="accountingObject" type="xs:string"/>
            <xs:element name="hasEnVersion" type="xs:boolean"/>
            <xs:element name="keywords" type="xs:string"/>
            <xs:element name="vid" type="xs:string"/>
            <xs:element name="type" type="xs:string"/>
            <xs:element name="kind" type="xs:string"/>
            <xs:element name="period" type="xs:string"/>
            <xs:element name="hasGeo" type="xs:boolean" nillable="true"/>
            <xs:element name="layerId" type="xs:string"/>
            <xs:element name="categories" type="xs:string"/>
            <xs:element name="OIV" type="xs:string"/>
            <xs:element name="oivList" type="xs:string"/>
            <xs:element name="description" type="xs:string"/>
            <xs:element name="CNT" type="xs:long"/>
            <xs:element name="permittedSystems" type="intList"/>
            <xs:element name="fields" type="ehdCommonAttribute" minOccurs="0" maxOccurs="unbounded"/>
            <xs:element name="systemFields" type="systemField" minOccurs="0" maxOccurs="unbounded"/>
            <xs:element name="fieldsEa" type="fieldEa"/>
            <xs:element name="responsiblePerson" type="responsiblPerson"/>
            <xs:element name="nameVariants" type="nameVariant" minOccurs="0" maxOccurs="unbounded"  />
        </xs:sequence>
    </xs:complexType>

    <xs:complexType name="ehdCatalogStats">
        <xs:sequence>
            <xs:element name="response" type="xs:int" nillable="true"/>
            <xs:element name="lastUpdated" type="xs:string" nillable="true"/>
            <xs:element name="validDate" type="xs:string" nillable="true"/>
            <xs:element name="message" type="xs:string"/>
            <xs:element name="status" type="xs:int" nillable="true"/>
        </xs:sequence>
    </xs:complexType>

    <xs:complexType name="ehdCommonAttribute">
        <xs:sequence>
            <xs:element name="id" type="xs:string"/>
            <xs:element name="columnId" type="xs:string"/>
            <xs:element name="name" type="xs:string"/>
            <xs:element name="enName" type="xs:string"/>
            <xs:element name="techName" type="xs:string"/>
            <xs:element name="groupName" type="xs:string"/>
            <xs:element name="typeName" type="xs:string"/>
            <xs:element name="type" type="xs:string"/>
            <xs:element name="isPk" type="xs:boolean" nillable="true"/>
            <xs:element name="isArray" type="xs:boolean" nillable="true"/>
            <xs:element name="system" type="xs:boolean" nillable="true"/>
            <xs:element name="hasTranslation" type="xs:boolean" nillable="true"/>
            <xs:element name="dictionaryId" type="xs:int" nillable="true"/>
            <xs:element name="catalogId" type="xs:int" nillable="true"/>
            <xs:element name="maxLength" type="xs:int"/>
            <xs:element name="systemField" type="xs:string"/>
            <xs:element name="permittedSystems" type="intList"/>
            <xs:element name="specification" type="ehdCatalog"/>
        </xs:sequence>
    </xs:complexType>
    <xs:complexType name="ehdException">
        <xs:sequence>
            <xs:element name="errorCode" type="xs:string"/>
            <xs:element name="errorText" type="xs:string"/>
        </xs:sequence>
    </xs:complexType>

    <xs:complexType name="ehdCatalogItemsFeatures">
        <xs:sequence>
            <xs:element name="featureList" type="ehdCatalogItemsFeature" minOccurs="0" maxOccurs="unbounded"/>
        </xs:sequence>
    </xs:complexType>
    <xs:complexType name="ehdCatalogItemsFeature">
        <xs:sequence>
            <xs:element name="geometry" type="xs:string"/>
            <xs:element maxOccurs="unbounded" ref="items"/>
            <xs:element name="type" type="xs:string"/>
        </xs:sequence>
    </xs:complexType>
    <xs:complexType name="ehdCatalogItems">
        <xs:sequence>
            <xs:element maxOccurs="unbounded" ref="items"/>
        </xs:sequence>
    </xs:complexType>
    <xs:element name="items">
        <xs:complexType>
            <xs:sequence>
                <xs:element maxOccurs="unbounded" ref="itemAttribute"/>
            </xs:sequence>
        </xs:complexType>
    </xs:element>
    <xs:element name="itemAttribute">
        <xs:complexType mixed="true">
            <xs:sequence>
                <xs:element minOccurs="0" maxOccurs="unbounded" ref="items"/>
            </xs:sequence>
            <xs:attribute name="name" use="required" type="xs:NCName"/>
        </xs:complexType>
    </xs:element>

    <xs:complexType name="systemField">
        <xs:sequence>
            <xs:element name="id" type="xs:int" nillable="true"/>
            <xs:element name="system" type="xs:string"/>
            <xs:element name="systemField" type="xs:string"/>
        </xs:sequence>
    </xs:complexType>

    <xs:complexType name="fieldEa">
        <xs:sequence>
            <xs:element name="id" type="xs:int" nillable="true"/>
            <xs:element name="RUBRICID" type="xs:string"/>
            <xs:element name="isLayerOpen" type="xs:int"/>
            <xs:element name="linkData" type="xs:string"/>
            <xs:element name="icoName" type="xs:string"/>
            <xs:element name="signDate" type="xs:string"/>
            <xs:element name="isUpdateWfs" type="xs:int"/>
            <xs:element name="isUpdateDb" type="xs:int"/>
            <xs:element name="guLink" type="xs:string"/>
            <xs:element name="typeObject" type="xs:string"/>
            <xs:element name="signFio" type="xs:string"/>
            <xs:element name="isUpdate" type="xs:int"/>
        </xs:sequence>
    </xs:complexType>


    <xs:complexType name="nameVariant">
        <xs:sequence>
            <xs:element name="technicalName" type="xs:string"/>
            <xs:element name="fullName" type="xs:string"/>
            <xs:element name="shortName" type="xs:string"/>
            <xs:element name="systemLogin" type="xs:string"/>
            <xs:element name="systemId" type="xs:string"/>
        </xs:sequence>
    </xs:complexType>

    <xs:complexType name="responsiblPerson">
        <xs:sequence>
            <xs:element name="phone" type="xs:string"/>
            <xs:element name="email" type="xs:string"/>
            <xs:element name="fio" type="xs:string"/>
        </xs:sequence>
    </xs:complexType>

    <xs:simpleType name="intList">
        <xs:list itemType="xs:string" />
    </xs:simpleType>

    <xs:element name="exportInfo">
        <xs:complexType>
            <xs:sequence>
                <xs:element name="id" type="xs:string"/>
                <xs:element name="status" type="xs:string"/>
                <xs:element name="lastFileGeneration" type="xs:string"/>
                <xs:element name="size" type="xs:string"/>
            </xs:sequence>
            <xs:attribute name="format" use="required" type="xs:NCName"/>
        </xs:complexType>
    </xs:element>

    <xs:complexType name="catalogExport">
        <xs:sequence>
            <xs:element maxOccurs="unbounded" ref="exportInfo"/>
            <xs:element name="errors" type="xs:string" nillable="true"/>
            <xs:element name="structureVersion" type="xs:string" nillable="true"/>
            <xs:element name="createDate" type="xs:string"/>
        </xs:sequence>
    </xs:complexType>


    <xs:complexType name="ehdDictionaryItems">
        <xs:sequence>
            <xs:element name="list" type="ehdDictionaryItem" minOccurs="0" maxOccurs="unbounded"/>
        </xs:sequence>
    </xs:complexType>
    <xs:complexType name="ehdDictionaryItem">
        <xs:sequence>
            <xs:element name="key" type="xs:string"/>
            <xs:element name="prnt_key" type="xs:string"/>
            <xs:element name="value" type="xs:string"/>
            <xs:element name="value_en" type="xs:string"/>
        </xs:sequence>
    </xs:complexType>
</xs:schema>
